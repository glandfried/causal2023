\newif\ifen
\newif\ifes
\newif\iffr
\newcommand{\fr}[1]{\iffr#1 \fi}
\newcommand{\En}[1]{\ifen#1\fi}
\newcommand{\Es}[1]{\ifes#1\fi}
\estrue
\documentclass[shownotes,aspectratio=169]{beamer}

\usepackage{siunitx}
\input{auxiliar/tex/diapo_encabezado.tex}
\input{auxiliar/tex/tikzlibrarybayesnet.code.tex}
 \mode<presentation>
 {
 %   \usetheme{Madrid}      % or try Darmstadt, Madrid, Warsaw, ...
 %   \usecolortheme{default} % or try albatross, beaver, crane, ...
 %   \usefonttheme{serif}  % or try serif, structurebold, ...
  \usetheme{Antibes}
  \setbeamertemplate{navigation symbols}{}
 }
\estrue
\usepackage{todonotes}
\setbeameroption{show notes}
%
%\newcommand{\E}{\mathop{\mathbb{E}}} % Símbolo para la Esperanza
\newcommand{\gray}{\color{black!55}}
\usepackage{ulem} % sout
\usepackage{mdframed}
\usepackage{comment}
\usepackage{listings}
\lstset{
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=true,
  columns=flexible,
  basicstyle={\ttfamily},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=4,
  showlines=true
}

%
\begin{document}

\color{black!85}
\large
%
% \begin{frame}[plain,noframenumbering]
%
%
% \begin{textblock}{160}(0,0)
% \includegraphics[width=1\textwidth]{auxiliar/static/deforestacion}
% \end{textblock}
%
% \begin{textblock}{80}(18,9)
% \textcolor{black!15}{\fontsize{44}{55}\selectfont Ok}{80}(36,29)
% \LARGE  \textcolor{black!15}{\scalebox{9}{$p$}}
% \end{textblock}
%
% %
% %
% % \begin{textblock}{160}(01,81)
% % \footnotesize \textcolor{black!5}{\textbf{\small Seminario ``Acuerdos intersubjetivos''\\
% % Comunidad Bayesiana Plurinacional} \\}
% % \end{textblock}
%
% \end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[plain,noframenumbering]
\begin{textblock}{160}(0,43)
\includegraphics[width=1\textwidth]{auxiliar/static/modelosGraficos}
\end{textblock}


\begin{textblock}{160}(4,4)
\LARGE \textcolor{black!85}{\fontsize{22}{0}\selectfont \textbf{Modelos gráficos e inferencia}}
\end{textblock}
% \begin{textblock}{160}(4,12)
% \LARGE \textcolor{black!85}{\fontsize{22}{0}\selectfont \textbf{algoritmos de inferencia}}
% \end{textblock}


\begin{textblock}{55}[0,0](72,23)
\begin{turn}{0}
\parbox{10cm}{\sloppy\setlength\parfillskip{0pt}
\textcolor{black!85}{Unidad 1} \\
\small\textcolor{black!85}{Acuerdos intersubjetivos en contextos de incertidumbre.} \\
\small\textcolor{black!85}{Especificación gráfica de modelos causales. Evaluación} \\
\small\textcolor{black!85}{de modelos causales. La emergencia del sobreajuste y el} \\
\small\textcolor{black!85}{balance natural de las reglas de la probabilidad.} \\
}
\end{turn}
\end{textblock}

\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(00,04)
\centering
\LARGE Verdad
\end{textblock}
\vspace{1.5cm} \large

\centering

 La ciencia tiene pretensión de verdad, de alcanzar\\

\textbf{acuerdos intersubjetivos con validez universal}

\vspace{0.7cm}

\pause

 \large Ciencias formales  \\
 \large  Sistemas axiomáticos cerrados, sin incertidumbre\\

 \vspace{0.3cm}

  \pause

 \large Ciencias con datos  \\
\large Sistemas naturales abiertos, con incertidumbre

\pause
\vspace{0.6cm}

\Large

¿Cuál es la verdad en \\ contextos de incertidumbre?
%
% \pause
% \vspace{0.2cm}
%
%
% Sí. Podemos evitar mentir.

\end{frame}


\begin{frame}[plain]
\begin{textblock}{160}(00,04)
\centering
\LARGE ¿Todo vale lo mismo?\\
\end{textblock}
\vspace{1cm} \large


\only<2->{
\begin{textblock}{50}(3,26) \centering
\includegraphics[width=1\textwidth, page={6}]{auxiliar/static/sidewalk_bubblegum_1997_1}
\end{textblock}}
 \only<3->{
\begin{textblock}{50}(55,26) \centering
\includegraphics[width=1\textwidth, page={6}]{auxiliar/static/sidewalk_bubblegum_1997_2}
\end{textblock}}
% \only<4>{
% \begin{textblock}{50}(107,20) \centering
% \includegraphics[width=1\textwidth, page={6}]{auxiliar/static/sidewalk_bubblegum_1997_3}
% \end{textblock}}
\only<4->{
\begin{textblock}{50}(107,26) \centering
\includegraphics[width=1\textwidth, page={6}]{auxiliar/static/sidewalk_bubblegum_1997_4}
\end{textblock}}

\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4) \centering
\LARGE Sabemos no mentir \\
\end{textblock}
\vspace{2cm}



\Large

\centering

$\bullet$ No afirmar más de lo que sabemos \pause

$\bullet$ Sin dejar de decir todo lo que sí sabemos

\pause \centering \vspace{1cm}

\Large

\textbf{¿Cómo exactamente?}


\end{frame}


\begin{frame}[plain]
 \begin{textblock}{160}(0,4)
 \centering \LARGE \only<3-5>{Distribución de creencias \\}
 \only<6->{¿Cómo preservamos los acuerdos intersubjetivos?\\}
\end{textblock}
\vspace{1.5cm}
\centering


\only<1>{
\begin{textblock}{160}(0,62)
\Large Detrás de una de estas caja hay un regalo. \\[0.1cm]

\large ¿Dónde está el regalo?
\end{textblock}
}

\only<1>{
\begin{textblock}{160}(0,28)
 \scalebox{1.1}{
\tikz{ %
         \node[factor, minimum size=1cm] (p1) {} ;
         \node[factor, minimum size=1cm, xshift=1.5cm] (p2) {} ;
         \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;


         \node[const, above=of p1, yshift=0.1cm] (np1) {\Large $?$};
         \node[const, above=of p2, yshift=0.1cm] (np2) {\Large $?$};
         \node[const, above=of p3, yshift=0.1cm] (np3) {\Large $?$};
         }
}
\end{textblock}
}

\only<2>{
\begin{textblock}{160}(0,28)
 \scalebox{1.1}{
\tikz{ %
         \node[factor, minimum size=1cm] (p1) {} ;
         \node[factor, minimum size=1cm, xshift=1.5cm] (p2) {} ;
         \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;


         \node[const, above=of p1, yshift=0.125cm] (np1) {\Large $0$};
         \node[const, above=of p2, yshift=0.125cm] (np2) {\Large $1$};
         \node[const, above=of p3, yshift=0.125cm] (np3) {\Large $0$};
         }
}
\end{textblock}
}

\only<3>{
\begin{textblock}{160}(0,28)
 \scalebox{1.1}{
\tikz{ %
         \node[factor, minimum size=1cm] (p1) {} ;
         \node[factor, minimum size=1cm, xshift=1.5cm] (p2) {} ;
         \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;


         \node[const, above=of p1, yshift=-0.05cm] (np1) {\Large $1/10$};
         \node[const, above=of p2, yshift=-0.05cm] (np2) {\Large $8/10$};
         \node[const, above=of p3, yshift=-0.05cm] (np3) {\Large $1/10$};
         }
}
\end{textblock}
}


\only<4-5>{
\begin{textblock}{160}(0,28)
 \scalebox{1.1}{
\tikz{ %
         \node[factor, minimum size=1cm] (p1) {} ;
         \node[factor, minimum size=1cm, xshift=1.5cm] (p2) {} ;
         \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;


         \node[const, above=of p1, yshift=-0.05cm] (np1) {\Large $1/3$};
         \node[const, above=of p2, yshift=-0.05cm] (np2) {\Large $1/3$};
         \node[const, above=of p3, yshift=-0.05cm] (np3) {\Large $1/3$};
         }
}
\end{textblock}
}

\only<5>{
\begin{textblock}{140}(10,64)   \centering \Large
Acuerdo intersubjetivo\\[0.1cm]
\large 1. Máximizamos incertidumbre  \\
\large 2. Dada la información disponible

\end{textblock}
}

\only<6->{
\begin{textblock}{160}(0,28)
 \scalebox{1.1}{
\tikz{ %
         \node[factor, minimum size=1cm] (p1) {} ;
         \node[det, minimum size=1cm, xshift=1.5cm] (p2) {\includegraphics[width=0.03\textwidth]{auxiliar/static/dedo.png}} ;
         \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;


         \node[const, above=of p1, yshift=-0.05cm] (np1) {\Large $\phantom{/}?\phantom{/}$};
         \node[const, above=of p2, yshift=-0.05cm] (np2) {\Large $\phantom{/}0\phantom{/}$};
         \node[const, above=of p3, yshift=-0.05cm] (np3) {\Large $\phantom{/}?\phantom{/}$};
         }
}
\end{textblock}
}



\end{frame}




\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Modelos causales \\
\end{textblock}
\vspace{1cm}


\begin{textblock}{160}(8,22)
%\onslide<2->{Modelo gráfico} \\ \vspace{0.3cm}
 \tikz{
    \node[latent,] (r) {\includegraphics[width=0.06\textwidth]{auxiliar/static/regalo.png}} ;
    \node[const,above=of r, xshift=-0.2cm, yshift=0.3cm] (titulo) {\Large Modelo gráfico} ;
    \node[const,left=of r] (nr) {Regalo: \Large $r$\,} ;

    \onslide<2->{
    \node[latent, below=of r] (d) {\includegraphics[width=0.05\textwidth]{auxiliar/static/dedo.png}} ;
    \node[const, left=of d] (nd) {Pista: \Large $s$\,} ;
    \node[const, below=of d, yshift=-0.2cm] (c) {$(s \neq r)$};

    \edge {r} {d};
    }
}
\end{textblock}

\only<1-2>{
\begin{textblock}{160}(65,33)
\scalebox{1.5}{
\tikz{
    \node[factor, minimum size=1cm] (p1) {} ;
    \node[factor, minimum size=1cm, xshift=1.5cm] (p2) {} ;
    \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;

    \node[const, above=of p1, yshift=.15cm] (fp1) {$1/3$};
    \node[const, above=of p2, yshift=.15cm] (fp2) {$1/3$};
    \node[const, above=of p3, yshift=.15cm] (fp3) {$1/3$};
    \node[const, below=of p2, yshift=-.10cm, xshift=0.3cm] (dedo) {};

    \node[invisible, xshift=4.75cm] (s-dist) {};
    \node[invisible, yshift=-1cm] (s-dist) {};
    \node[invisible, yshift=1.2cm] (s-dist) {};
    }
}
\end{textblock}
}

\only<3>{
\begin{textblock}{160}(65,33)
\scalebox{1.5}{
\tikz{ %

         \node[factor, minimum size=1cm] (p1) {} ;
         \node[det, minimum size=1cm, xshift=1.5cm] (p2) {\includegraphics[width=0.03\textwidth]{auxiliar/static/dedo.png}} ;
         \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;
%
%
         \node[const, above=of p1, yshift=.15cm] (fp1) {$?$};
         \node[const, above=of p2, yshift=.15cm] (fp2) {$0$};
         \node[const, above=of p3, yshift=.15cm] (fp3) {$?$};
         \node[const, below=of p2, yshift=-.10cm, xshift=0.3cm] (dedo) {};

%         \node[const, above=of p2, xshift=.8cm, yshift=.15cm] (fp3) {$66\%$};
%
         \node[invisible, xshift=4.75cm] (s-dist) {};
         \node[invisible, yshift=-1cm] (s-dist) {};
         \node[invisible, yshift=1.2cm] (s-dist) {};
%
%         \plate[color=red] {no} {(p1)} {}; %
%         \plate {si} {(p2)(p3)} {}; %

        }
}
\end{textblock}
}

\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Modelos causales\\
 \Large Máxima incertidumbre dado el modelo \\
\end{textblock}
\vspace{1cm}
\vspace{1cm}


\only<1-3>{
\begin{textblock}{160}(8,22)
%\onslide<2->{Modelo gráfico} \\ \vspace{0.3cm}
 \tikz{
    \node[latent,] (r) {\includegraphics[width=0.06\textwidth]{auxiliar/static/regalo.png}} ;
    \node[const,above=of r, xshift=-0.2cm, yshift=0.3cm] (titulo) {\Large {Modelo gráfico}} ;
    \node[const,left=of r] (nr) {Regalo: \Large $r$\,} ;

    \node[latent, below=of r] (d) {\includegraphics[width=0.05\textwidth]{auxiliar/static/dedo.png}} ;
    \node[const, left=of d] (nd) {Pista: \Large $s$\,} ;
    \node[const, below=of d, yshift=-0.2cm] (c) {$(s \neq r)$};

    \edge {r} {d};

}
\end{textblock}
}


\only<1->{
\begin{textblock}{80}(60,20) \centering
\scalebox{1.1}{
\tikz{
\onslide<1->{
\node[latent, draw=white, yshift=0.6cm] (b0) {$ 1$};

\node[latent,below=of b0,yshift=0.6cm, xshift=-3cm] (r1) {$r_1$};
\node[latent,below=of b0,yshift=0.6cm] (r2) {$r_2$};
\node[latent,below=of b0,yshift=0.6cm, xshift=3cm] (r3) {$r_3$};

\node[latent, below=of r1, draw=white, yshift=0.6cm] (br1) {$\frac{1}{3}$};
\node[latent, below=of r2, draw=white, yshift=0.6cm] (br2) {$\frac{1}{3}$};
\node[latent, below=of r3, draw=white, yshift=0.6cm] (br3) {$\frac{1}{3}$};
}
\onslide<2->{
\node[latent,below=of br1,yshift=0.6cm, xshift=-0.7cm] (r1d2) {$s_2$};
\node[latent,below=of br1,yshift=0.6cm, xshift=0.7cm] (r1d3) {$s_3$};

\node[latent,below=of r1d2,yshift=0.6cm,draw=white] (br1d2) {$\frac{1}{3}\frac{1}{2}$};
\node[latent,below=of r1d3,yshift=0.6cm, draw=white] (br1d3) {$\frac{1}{3}\frac{1}{2}$};
}
\onslide<3->{
\node[latent,below=of br2,yshift=0.6cm, xshift=-0.7cm] (r2d1) {$s_1$};
\node[latent,below=of br2,yshift=0.6cm, xshift=0.7cm] (r2d3) {$s_3$};
\node[latent,below=of br3,yshift=0.6cm, xshift=-0.7cm] (r3d1) {$s_1$};
\node[latent,below=of br3,yshift=0.6cm, xshift=0.7cm] (r3d2) {$s_2$};

\node[latent,below=of r2d1,yshift=0.6cm, draw=white] (br2d1) {$\frac{1}{3}\frac{1}{2}$};
\node[latent,below=of r2d3,yshift=0.6cm,draw=white] (br2d3) {$\frac{1}{3}\frac{1}{2}$};
\node[latent,below=of r3d1,yshift=0.6cm, draw=white] (br3d1) {$\frac{1}{3}\frac{1}{2}$};
\node[latent,below=of r3d2,yshift=0.6cm,draw=white] (br3d2) {$\frac{1}{3}\frac{1}{2}$};
}
\onslide<1->{
\edge[-] {b0} {r1,r2,r3};
\edge[-] {r1} {br1};
\edge[-] {r2} {br2};
\edge[-] {r3} {br3};
}
\onslide<2->{
\edge[-] {br1} {r1d2,r1d3};
\edge[-] {r1d2} {br1d2};
\edge[-] {r1d3} {br1d3};
}
\onslide<3->{
\edge[-] {br2} {r2d1, r2d3};
\edge[-] {br3} {r3d1,r3d2};
\edge[-] {r2d1} {br2d1};
\edge[-] {r2d3} {br2d3};
\edge[-] {r3d1} {br3d1};
\edge[-] {r3d2} {br3d2};
}
}
}
\end{textblock}
}


\only<4->{
 \begin{textblock}{65}(0,24)
  \centering
  Creencia$(r,s|\text{Modelo})$ \\ \vspace{0.3cm}
 \begin{tabular}{c|c|c|c||c} \setlength\tabcolsep{0.4cm}
        & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, & \\ \hline
  $s_1$  & \onslide<5->{$0$} & \onslide<6->{$1/6$} & \onslide<6->{$1/6$} & \\ \hline
  $s_2$  & \onslide<7->{$1/6$} & \onslide<7->{$0$} & \onslide<7->{$1/6$} &  \\ \hline
       $s_3$ & \onslide<8->{$1/6$} & \onslide<8->{$1/6$} & \onslide<8->{$0$} &  \\ \hline \hline
              & & &  & \\
\end{tabular}
\end{textblock}
}



\only<9->{
 \begin{textblock}{60}(0,65) \centering
Creencia conjunta\\

intersubjetiva inicial
 \end{textblock}
 }
\end{frame}



\begin{frame}[plain]
 \begin{textblock}{160}(0,4)
 \centering \Large\hspace{1.4cm}Máxima incertidumbre dado el modelo \only<1-5>{\phantom}{y el dato}
 \end{textblock}

\vspace{1cm}

 \begin{textblock}{160}(0,15)
  \centering
  $\overbrace{\text{Creencia}(r,s|\text{M})}^{\text{\scriptsize De ambas variables}}$ \\ \vspace{0.3cm}
 \begin{tabular}{c|c|c|c||c} \setlength\tabcolsep{0.4cm}
     $\phantom{\bm{s_2}}$   & \, $r_1$ \, &  \, $\only<2>{\gray}r_2$ \, & \, $\only<2>{\gray}r_3$ \, &  \phantom{\bm{$1/3$}} \\ \hline
  $\only<5>{\gray}s_1$ & $\only<5>{\gray}0$ & $\only<2,5>{\gray}1/6$ & $\only<2,5>{\gray}1/6$ & \onslide<4->{$\only<5>{\gray}1/3$} \\ \hline
  $\only<5>{\bm}{s_2}$ & $1/6$ & $\only<2>{\gray}0$ & $\only<2>{\gray}1/6$ & \onslide<4->{$1/3$} \\ \hline
  $\only<5>{\gray}s_3$ & $\only<5>{\gray}1/6$ & $\only<2,5>{\gray}1/6$ & $\only<2,5>{\gray}0$ & \onslide<4->{$\only<5>{\gray}1/3$} \\ \hline \hline
        & \onslide<3->{$\only<5>{\gray}1/3$} & \onslide<3->{$\only<5>{\gray}1/3$} & \onslide<3->{$\only<5>{\gray}1/3$} &  \\
\end{tabular}

\vspace{0.3cm}

\onslide<2->{
\begin{align*}
 \text{Creencia}(r|\text{M}) = \onslide<3->{\sum_s \text{Creencia}(r,s|\text{M})}
\end{align*}
}
\vspace{-0.5cm}
\onslide<4->{
\begin{align*}
 \text{Creencia}(s|\text{M}) = \sum_r \text{Creencia}(r,s|\text{M})
\end{align*}
}
\end{textblock}

\end{frame}


\begin{frame}[plain]
 \begin{textblock}{160}(0,4)
 \centering \Large\hspace{1.4cm}Máxima incertidumbre dado el modelo y el dato
 \end{textblock}

\vspace{1cm}

\only<1->{
 \begin{textblock}{160}(0,15)
  \centering
  \only<1-2>{$\overbrace{\text{Creencia}(r,s_2|\text{M})}^{\text{\scriptsize De ambas variables}}$}\only<3->{$\overbrace{\text{Creencia}(r|s_2,\text{M})}^{\text{\scriptsize De ambas variables}}$} \\ \vspace{0.3cm}
 \begin{tabular}{c|c|c|c||c} \setlength\tabcolsep{0.4cm}
        $\phantom{\bm{s_2}}$ & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, &  \phantom{\bm{$1/3$}} \\ \hline
  &  &  &  & \\ \hline
  $\bm{s_2}$ & \only<1-2>{$1/6$}\only<3>{$\frac{1}{6}/\frac{1}{3}$}\only<4->{$1/2$} & $0$ & \only<1-2>{$1/6$}\only<3>{$\frac{1}{6}/\frac{1}{3}$}\only<4->{$1/2$} & \only<1>{$1/3$}\only<2>{{$\bm{1/3}$}}\only<3>{$\frac{1}{3}/\frac{1}{3}$}\only<4->{$1$} \\ \hline
  &  &  & &  \\
\end{tabular}
\end{textblock}
}

\only<1>{
\begin{textblock}{160}(0,58)
\begin{equation*}
\ \phantom{\underbrace{\text{Creencia}(r|s_2,\text{M})}_{\text{Nueva creencia}} =} \hfrac{\overbrace{\text{Creencia}(r, s_2|\text{M})}^{\text{Creencia compatible}}}{\phantom{\underbrace{\text{Creencia}(s_2|\text{M})}_{\text{Creencia total que compatible}}}}
\end{equation*}
\end{textblock}
}

\only<2>{
\begin{textblock}{160}(0,58)
\begin{equation*}
\ \phantom{\underbrace{\text{Creencia}(r|s_2,\text{M})}_{\text{Nueva creencia}} =}\hfrac{\overbrace{\text{Creencia}(r, s_2|\text{M})}^{\text{Creencia compatible}}}{\underbrace{\text{Creencia}(s_2|\text{M})}_{\text{Creencia total que compatible}}}
\end{equation*}
\end{textblock}
}


\only<3-4>{
\begin{textblock}{160}(0,58)
\begin{equation*}
\underbrace{\text{Creencia}(r|s_2,\text{M})}_{\text{Nueva creencia}} = \frac{\overbrace{\text{Creencia}(r, s_2|\text{M})}^{\text{Creencia compatible}}}{\underbrace{\text{Creencia}(s_2|\text{M})}_{\text{Creencia total que compatible}}}
\end{equation*}
\end{textblock}
}


\only<5->{
\begin{textblock}{160}(7,57)
\centering
\scalebox{1.2}{
\tikz{ %

         \node[factor, minimum size=1cm] (p1) {} ;
         \node[det, minimum size=1cm, xshift=1.5cm] (p2) {\includegraphics[width=0.03\textwidth]{auxiliar/static/dedo.png}} ;
         \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;

         \node[const, above=of p1, yshift=.15cm] (fp1) {$1/2$};
         \node[const, above=of p2, yshift=.15cm] (fp2) {$0$};
         \node[const, above=of p3, yshift=.15cm] (fp3) {$1/2$};
         \node[const, below=of p2, yshift=-.10cm, xshift=0.3cm] (dedo) {};

         \node[invisible, xshift=4.75cm] (s-dist) {};
         \node[invisible, yshift=-1cm] (s-dist) {};
         \node[invisible, yshift=1.2cm] (s-dist) {};

        }
}
\end{textblock}
}

\end{frame}

{
\setbeamercolor{background canvas}{bg=orange!20}
\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \LARGE Las reglas de la probabilidad
\end{textblock}
\onslide<1>{
\vspace{1.5cm}



\begin{columns}[t]
\begin{column}{0.5\textwidth}
 \centering

 {\large Principio de integridad}

 \vspace{0.4cm}

\textbf{Regla de la suma}


\begin{equation*}
 P(r) = \sum_j P(r,s_j)
\end{equation*}



 \small
 No perdemos ni creamos creencia cuando \\
la distribuimos. Si sumamos, la recuperamos.

 \end{column}
 \begin{column}{0.5\textwidth}

\centering
 {\large Principio de coherencia}

 \vspace{0.4cm}

\textbf{Regla del producto}

\begin{equation*}
 P(r|s)  = \frac{P(r,s)}{P(s)}
\end{equation*}

\vspace{0.1cm}

\small
Preservamos la creencia previa que \\
sigue siendo compatible con el dato

\end{column}
\end{columns}
}
\end{frame}
}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \LARGE Regla del producto
\end{textblock}

\begin{textblock}{180}(-10,28)
 \begin{align*}
 \phantom{\frac{P(\text{R})}{P\text{R})}P(\text{Regalo} = i)}P(\,\overbrace{\,\text{Regalo} = i\,}^{\text{\small Hipótesis}_i}\,|\,\overbrace{\,\text{Pista} = 2\,}^{\text{\small Dato}}\,) & = \frac{P(\text{Regalo} = i, \text{Pista} = 2)}{P(\text{Pista} = 2)} \phantom{-----------} \\[0.4cm]
 \only<2-3>{\phantom{\frac{P(\text{R})}{P\text{R})}}P(\,\,\text{Pista} = 2\,\,|\,\,\text{Regalo} = i\,\,) & = }  \only<3>{\frac{P(\text{Regalo} = i, \text{Pista} = 2)}{P(\text{Regalo} = i)}\phantom{\frac{P(\text{R})}{P\text{R})}}}
 \only<4>{\phantom{\frac{P(\text{R})}{P\text{R})}}P(\text{Regalo} = i)P(\,\,\text{Pista} = 2\,\,|\,\,\text{Regalo} = i\,\,) & =   {P(\text{Regalo} = i, \text{Pista} = 2)}\phantom{\frac{P(\text{R})}{P\text{R})}} }
 \only<5>{\phantom{\frac{P(\text{R})}{P\text{R})}}P(\text{Regalo} = i)P(\,\,\text{Pista} = 2\,\,|\,\,\text{Regalo} = i\,\,) & =   \bm{P(\text{Regalo} = i, \text{Pista} = 2)}\phantom{\frac{P(\text{R})}{P\text{R})}} }
 \end{align*}
\end{textblock}

\end{frame}


\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \LARGE Regla del producto \\
\Large Teorema de Bayes \\
\end{textblock}

\only<1>{
\begin{textblock}{180}(-10,28)
 \begin{align*}
 \phantom{\frac{P(\text{R})}{P\text{R})}-\ \ \ }P(\,\overbrace{\,\text{Regalo} = i\,}^{\text{\small Hipótesis}_i}\,|\,\overbrace{\,\text{Pista} = 2\,}^{\text{\small Dato}}\,) & = \frac{P(\text{Pista} = 2)P(\,\,\text{Pista} = 2\,\,|\,\,\text{Regalo} = i\,\,)}{P(\text{Pista} = 2)} \\[0.4cm]
 \end{align*}
\end{textblock}
}

\only<2>{
\begin{textblock}{160}(0,33)
\begin{equation*}
P(\text{Hip\'otesis}_i |\,\text{Dato}) = \frac{P(\text{Dato}\,|\,\text{Hip\'otesis}_i) \, P(\text{Hip\'otesis}_i)}{P(\text{Dato})}
\end{equation*}
\end{textblock}
}


\only<3>{
\begin{textblock}{160}(0,26.62)
\begin{equation*}
\underbrace{P(\text{Hip\'otesis}_i|\,\text{Dato})}_{\text{\small Posterior}} = \frac{\overbrace{P(\text{Dato}\,|\,\text{Hip\'otesis}_i)}^{\text{\small Verosimilitud}} \overbrace{P(\text{Hip\'otesis}_i)}^{\text{\small Prior}} }{\underbrace{P(\text{Dato})}_{\text{\small Evidencia}}}
\end{equation*}
\end{textblock}
}

\vspace{0.2cm}

\only<4->{
%\vspace{0.3cm}
\Wider[2cm]{
\begin{textblock}{160}(0,23)
\begin{equation*}
\underbrace{P(\text{Hip\'otesis}_i|\,\text{Dato, Modelo})}_{\text{\small Posterior}} = \frac{\overbrace{P(\text{Dato}\,|\,\text{Hip\'otesis$_i$, Modelo})}^{\text{\small Verosimilitud}} \overbrace{P(\text{Hip\'otesis}_i|\text{ Modelo})}^{\text{\small Prior}} }{\underbrace{P(\text{Dato }|\text{ Modelo})}_{\text{\small Evidencia}}}
\end{equation*}
\end{textblock}
}
}

\only<4>{
\begin{textblock}{100}(30,65)
\centering \vspace{0.05cm}
\Large Y el \textbf{modelo}!

\large (relaciona el \textbf{dato} con la \textbf{hipótesis})
\vspace{0.1cm}
\end{textblock}
}


\only<5-9>{
\begin{textblock}{140}(10,62)
\begin{flalign*}
\only<5>{P(\underbrace{\text{Dato}\,|\,\text{Modelo}}_{\text{\small Evidencia}}) = \ ? }
\only<6>{P(\underbrace{\text{Dato}\,|\,\text{Modelo}}_{\text{\small Evidencia}}) = \ \text{\Large \ Regla de la suma} }
\only<7-8>{P(\text{Dato}\,|\,\text{Modelo}) = }
\only<9->{P(\underbrace{\text{Dato}\,|\,\text{Modelo}}_{\hfrac{\text{\small Con \textbf{todas}}}{\text{\small las hipótesis}} } ) = }
\only<7>{\sum_{\text{Hipótesis}_i} P(\underbrace{\text{Dato},\,\text{Hip\'otesis$_i$}}_{\hfrac{\text{\small Creencia}}
{\text{\small conjunta}}} \, | \, \text{Modelo})}
\only<8>{\sum_{\text{Hipótesis}_i} P(\underbrace{\text{Dato}\,|\,\text{Hip\'otesis$_i$, Modelo}}_{\text{\small Verosimilitud}}) P(\underbrace{\text{Hip\'otesis}_i|\text{ Modelo}}_{\text{\small prior}}) }
\only<9>{\sum_{\text{Hipótesis}_i} P(\underbrace{\text{Dato}\,|\,\text{Hip\'otesis$_i$, Modelo}}_{\hfrac{\text{\small Predicción con \textbf{una}}}{\text{\small única hipótesis}}}) P(\text{Hip\'otesis}_i|\text{ Modelo}) }
&&
\end{flalign*}
\end{textblock}
}


\only<10->{
\begin{textblock}{160}(0,60)
\begin{equation*}
 P(\text{Modelo}_j|\text{Datos}) = \onslide<11>{\frac{\overbrace{P(\text{Datos}|\text{Modelo}_j)}^{\text{\small Evidencia}} P(\text{Modelo}_j)}{ P(\text{Datos})}}
\end{equation*}
\end{textblock}
}


\end{frame}



\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Modelo causal alternativo
 \end{textblock}
 \vspace{-1cm}

 \begin{textblock}{80}(0,24)
 \centering

 \large Modelo gráfico:

 \vspace{0.3cm}

 \tikz{
    \only<-2>{\phantom}{\node[latent] (d) {\includegraphics[width=0.10\textwidth]{auxiliar/static/dedo.png}} ;}
    \only<-2>{\phantom}{\node[const,above=of d] (nd) {\Large $s$} ;}
    \node[latent, above=of d, xshift=-1.5cm] (r) {\includegraphics[width=0.12\textwidth]{auxiliar/static/regalo.png}} ;
    \node[const,below=of r] (nr) {\Large $r$} ;
    \only<-1>{\phantom}{\node[latent, fill=black!30, above=of d, xshift=1.5cm] (c) {\includegraphics[width=0.12\textwidth]{auxiliar/static/cerradura.png}} ;}
    \only<-1>{\phantom}{\node[const,below=of c] (nc) {\, \Large $c = 1$} ;}
    \only<-2>{\phantom}{\edge {r,c} {d};}

    \only<-2>{\phantom}{\node[const,below=of d] (modelo) {\large $s \neq r$ \, $s \neq c$} ;}
}
 \end{textblock}


\only<1>{
 \begin{textblock}{160}(80,33)
\scalebox{1.5}{
\tikz{
    \node[factor, minimum size=1cm] (p1) {} ;
    \node[factor, minimum size=1cm, xshift=1.5cm] (p2) {} ;
    \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;

    \node[const, above=of p1, yshift=.15cm] (fp1) {$1/3$};
    \node[const, above=of p2, yshift=.15cm] (fp2) {$1/3$};
    \node[const, above=of p3, yshift=.15cm] (fp3) {$1/3$};
    \node[const, below=of p2, yshift=-.10cm, xshift=0.3cm] (dedo) {};

    \node[invisible, xshift=4.75cm] (s-dist) {};
    \node[invisible, yshift=-1cm] (s-dist) {};
    \node[invisible, yshift=1.2cm] (s-dist) {};
    }
}
\end{textblock}
}

\only<2>{
 \begin{textblock}{160}(80,33)
\scalebox{1.5}{
\tikz{
    \node[factor, minimum size=1cm] (p1) {\includegraphics[width=0.025\textwidth]{auxiliar/static/cerradura.png}} ;
    \node[factor, minimum size=1cm, xshift=1.5cm] (p2) {} ;
    \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;

    \node[const, above=of p1, yshift=.15cm] (fp1) {$1/3$};
    \node[const, above=of p2, yshift=.15cm] (fp2) {$1/3$};
    \node[const, above=of p3, yshift=.15cm] (fp3) {$1/3$};
    \node[const, below=of p2, yshift=-.10cm, xshift=0.3cm] (dedo) {};

    \node[invisible, xshift=4.75cm] (s-dist) {};
    \node[invisible, yshift=-1cm] (s-dist) {};
    \node[invisible, yshift=1.2cm] (s-dist) {};
    }
}
\end{textblock}
}


\only<3>{
 \begin{textblock}{160}(80,33)
\scalebox{1.5}{
\tikz{
    \node[factor, minimum size=1cm] (p1) {\includegraphics[width=0.025\textwidth]{auxiliar/static/cerradura.png}} ;
    \node[det, minimum size=1cm, xshift=1.5cm] (p2) {\includegraphics[width=0.03\textwidth]{auxiliar/static/dedo.png}} ;
    \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;

    \node[const, above=of p1, yshift=.15cm] (fp1) {$\phantom{/}?\phantom{/}$};
    \node[const, above=of p2, yshift=.15cm] (fp2) {$\phantom{/}0\phantom{/}$};
    \node[const, above=of p3, yshift=.15cm] (fp3) {$\phantom{/}?\phantom{/}$};
    \node[const, below=of p2, yshift=-.10cm, xshift=0.3cm] (dedo) {};

    \node[invisible, xshift=4.75cm] (s-dist) {};
    \node[invisible, yshift=-1cm] (s-dist) {};
    \node[invisible, yshift=1.2cm] (s-dist) {};
    }
}
\end{textblock}
}

\end{frame}


\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Modelo causal alternativo \\
 \Large \phantom{y el dato} Incertidumbre óptima dado el modelo \only<1-12>{\phantom}{y el dato}
 \end{textblock}
 \vspace{-1cm}

 \only<1-3>{
 \begin{textblock}{80}(0,24)
 \centering

 \large Modelo gráfico:

 \vspace{0.3cm}

 \tikz{
    {\node[latent] (d) {\includegraphics[width=0.10\textwidth]{auxiliar/static/dedo.png}} ;}
    {\node[const,above=of d] (nd) {\Large $s$} ;}
    \node[latent, above=of d, xshift=-1.5cm] (r) {\includegraphics[width=0.12\textwidth]{auxiliar/static/regalo.png}} ;
    \node[const,below=of r] (nr) {\Large $r$} ;
    {\node[latent, fill=black!30, above=of d, xshift=1.5cm] (c) {\includegraphics[width=0.12\textwidth]{auxiliar/static/cerradura.png}} ;}
    {\node[const,below=of c] (nc) {\, \Large $c = 1$} ;}
    {\edge {r,c} {d};}

    {\node[const,below=of d] (modelo) {\large $s \neq r$ \, $s \neq c$} ;}
}
 \end{textblock}
}

  \only<4-12>{
 \begin{textblock}{80}(0,26)
  \centering
  $P(r,s)$ \\ \vspace{0.3cm}
 \begin{tabular}{c|c|c|c||c} \setlength\tabcolsep{0.4cm}
        & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, & \\ \hline
  { $s_2$}  & \onslide<5->{$1/6$} & \onslide<7->{$0$} & \onslide<9->{$1/3$} & \onslide<12->{$1/2$} \\ \hline
       {$s_3$} & \onslide<6->{$1/6$} & \onslide<8->{$1/3$} & \onslide<10->{$0$} & \onslide<12->{$1/2$} \\ \hline
              & \onslide<12->{$1/3$} &  \onslide<12->{$1/3$} & \onslide<12->{$1/3$}  & \onslide<12->{$1$} \\
\end{tabular}
\end{textblock}
}

\only<13>{
 \begin{textblock}{80}(0,26)
  \centering
  $P(r,s_2)$ \\ \vspace{0.3cm}
 \begin{tabular}{c|c|c|c||c} \setlength\tabcolsep{0.4cm}
        & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, & \\ \hline
        { $s_2$}  & \onslide<6->{$1/6$} & \onslide<8->{$0$} & \onslide<10->{$1/3$} & \onslide<13->{$1/2$} \\ \hline
\end{tabular}
\end{textblock}
}


\only<14->{
 \begin{textblock}{80}(0,26)
  \centering
  $P(r|s_2)$ \\ \vspace{0.3cm}
 \begin{tabular}{c|c|c|c||c} \setlength\tabcolsep{0.4cm}
        & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, & \phantom{$1/2$}\\ \hline
  { $s_2$}  & \onslide<6->{$1/3$} & \onslide<8->{$0$} & \onslide<10->{$2/3$} & \onslide<13->{$1$} \\ \hline
\end{tabular}
\end{textblock}
}


\only<11-12>{
\begin{textblock}{80}(0,58)
 \centering
\begin{center}
 Regla de la suma
 \end{center}

 $P(s_i) = \sum_{j} P(r_j,s_i)$
 \\

\end{textblock}
}

\only<13-14>{
\begin{textblock}{80}(0,58)
 \centering
\begin{center}
 Regla del producto
 \end{center}
 \begin{equation*}
P(r_i|s_2) = \frac{P(r_i,s_2)}{P(s_2)}
 \end{equation*}

\end{textblock}
}


\only<15>{
\begin{textblock}{70}(10,55)
\centering
 \scalebox{1}{
\tikz{
    \node[factor, minimum size=1cm] (p1) {\includegraphics[width=0.07\textwidth]{auxiliar/static/cerradura.png}} ;
    \node[det, minimum size=1cm, xshift=1.5cm] (p2) {\includegraphics[width=0.07\textwidth]{auxiliar/static/dedo.png}} ;
    \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;

    \node[const, above=of p1, yshift=.15cm] (fp1) {$1/3$};
    \node[const, above=of p2, yshift=.15cm] (fp2) {$\phantom{/}0\phantom{/}$};
    \node[const, above=of p3, yshift=.15cm] (fp3) {$2/3$};
    \node[const, below=of p2, yshift=-.10cm, xshift=0.3cm] (dedo) {};

    \node[invisible, xshift=4.75cm] (s-dist) {};
    \node[invisible, yshift=-1cm] (s-dist) {};
    \node[invisible, yshift=1.2cm] (s-dist) {};
    }
}
\end{textblock}
}

 \only<2-12>{
\begin{textblock}{80}(70,20) \centering
\scalebox{1.2}{
 \tikz{
 \onslide<2->{
\node[latent, draw=white, yshift=0.8cm] (b0) {$1$};
\node[latent,below=of b0,yshift=0.8cm, xshift=-2cm] (r1) {$r_1$};
{\node[latent,below=of b0,yshift=0.8cm] (r2) {$r_2$}; }
\node[latent,below=of b0,yshift=0.8cm, xshift=2cm] (r3) {$r_3$};
\node[latent, below=of r1, draw=white, yshift=0.7cm] (bc11) {$\frac{1}{3}$};
{\node[latent, below=of r2, draw=white, yshift=0.7cm] (bc12) {$\frac{1}{3}$};}
\node[latent, below=of r3, draw=white, yshift=0.7cm] (bc13) {$\frac{1}{3}$};
}
\onslide<3->{
\node[latent,below=of bc11,yshift=0.7cm, xshift=-0.5cm] (r1d2) {$s_2$};
{\node[latent,below=of bc11,yshift=0.7cm, xshift=0.5cm] (r1d3) {$s_3$};}
{\node[latent,below=of bc12,yshift=0.7cm] (r2d3) {$s_3$};}
\node[latent,below=of bc13,yshift=0.7cm] (r3d2) {$s_2$};
\node[latent,below=of r1d2,yshift=0.7cm,draw=white] (br1d2) {$\only<5>{\bm}{\frac{1}{3}\frac{1}{2}}$};
{\node[latent,below=of r1d3,yshift=0.7cm, draw=white] (br1d3) {$\only<6>{\bm}{\frac{1}{3}\frac{1}{2}}$};}
{\node[latent,below=of r2d3,yshift=0.7cm,draw=white] (br2d3) {$\only<8>{\bm}{\frac{1}{3}}$};}
\node[latent,below=of r3d2,yshift=0.7cm,draw=white] (br3d2) {$\only<9>{\bm}{\frac{1}{3}}$};
}

\node[invisible, left=of r1d2,xshift=-0.1cm] (il) {};
\node[invisible, right=of br3d2,xshift=0.1cm] (il) {};

\onslide<2->{
\edge[-] {b0} {r1,r2,r3};
\edge[-] {r1} {bc11};
\edge[-] {r2} {bc12};
\edge[-] {r3} {bc13};
}
\onslide<3->{
\edge[-] {bc11} {r1d2,r1d3};
\edge[-] {bc12} {r2d3};
\edge[-] {bc13} {r3d2};
\edge[-] {r1d2} {br1d2};
\edge[-] {r1d3} {br1d3};
\edge[-] {r2d3} {br2d3};
\edge[-] {r3d2} {br3d2};
}
}
}
\end{textblock}
}


\only<13->{
\begin{textblock}{80}(70,20) \centering
\scalebox{1.2}{
 \tikz{
\node[latent, draw=white, yshift=0.8cm] (b0) {$1$};
\node[latent,below=of b0,yshift=0.8cm, xshift=-2cm] (r1) {$r_1$};
{\color{gray}\node[latent,draw=gray,below=of b0,yshift=0.8cm] (r2) {$r_2$}; }
\node[latent,below=of b0,yshift=0.8cm, xshift=2cm] (r3) {$r_3$};

% \node[latent, below=of r1, draw=white, yshift=0.8cm] (br1) {$\frac{1}{3}$};
% \node[latent, below=of r2, draw=white, yshift=0.8cm] (br2) {$\frac{1}{3}$};
% \node[latent, below=of r3, draw=white, yshift=0.8cm] (br3) {$\frac{1}{3}$};
% \node[latent,below=of br1,yshift=0.8cm] (c11) {$c_1$};
% \node[latent,below=of br2,yshift=0.8cm] (c12) {$c_1$};
% \node[latent,below=of br3,yshift=0.8cm] (c13) {$c_1$};

\node[latent, below=of r1, draw=white, yshift=0.7cm] (bc11) {$\frac{1}{3}$};
{\color{gray}\node[latent, below=of r2, draw=white, yshift=0.7cm] (bc12) {$\frac{1}{3}$};}
\node[latent, below=of r3, draw=white, yshift=0.7cm] (bc13) {$\frac{1}{3}$};
\node[latent,below=of bc11,yshift=0.7cm, xshift=-0.5cm] (r1d2) {$s_2$};
{\color{gray}\node[latent,draw=gray,below=of bc11,yshift=0.7cm, xshift=0.5cm] (r1d3) {$s_3$};}
{\color{gray}\node[latent, draw=gray,below=of bc12,yshift=0.7cm] (r2d3) {$s_3$};}
\node[latent,below=of bc13,yshift=0.7cm] (r3d2) {$s_2$};

\node[latent,below=of r1d2,yshift=0.7cm,draw=white] (br1d2) {$\frac{1}{3}\frac{1}{2}$};
{\color{gray}\node[latent,below=of r1d3,yshift=0.7cm, draw=white] (br1d3) {$\frac{1}{3}\frac{1}{2}$};}
{\color{gray}\node[latent,below=of r2d3,yshift=0.7cm,draw=white] (br2d3) {$\frac{1}{3}$};}
\node[latent,below=of r3d2,yshift=0.7cm,draw=white] (br3d2) {$\frac{1}{3}$};
\edge[-] {b0} {r1,r3};
\edge[-,draw=gray] {b0} {r2};
% \edge[-] {r1} {br1};
% \edge[-] {r2} {br2};
% \edge[-] {r3} {br3};
% \edge[-] {br1} {c11};
% \edge[-] {br2} {c12};
% \edge[-] {br3} {c13};
\edge[-] {r1} {bc11};
\edge[-,draw=gray] {r2} {bc12};
\edge[-] {r3} {bc13};
\edge[-] {bc11} {r1d2};
\edge[-,draw=gray] {bc11} {r1d3};
\edge[-,draw=gray] {bc12} {r2d3};
\edge[-] {bc13} {r3d2};
\edge[-] {r1d2} {br1d2};
\edge[-,draw=gray] {r1d3} {br1d3};
\edge[-,draw=gray] {r2d3} {br2d3};
\edge[-] {r3d2} {br3d2};
}
}
\end{textblock}
}

\end{frame}


\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \LARGE Modelos causales alternativos
\end{textblock}
 \vspace{1.25cm}

\begin{textblock}{80}(80,18)
\centering
 \tikz{
    \node[latent,] (r) {\includegraphics[width=0.12\textwidth]{auxiliar/static/regalo.png}} ;
    \node[const,left=of r] (nr) {\Large $r$} ;


    \node[latent, below=of r] (d) {\includegraphics[width=0.10\textwidth]{auxiliar/static/dedo.png}} ;
    \node[const, left=of d] (nd) {\Large $s$} ;

    \edge {r} {d};

}

\vspace{0.75cm}
\onslide<-1>{
\tikz{
         \node[factor, minimum size=1cm] (p1) {\includegraphics[width=0.07\textwidth]{auxiliar/static/cerradura.png}} ;
         \node[det, minimum size=1cm, xshift=1.5cm] (p2) {\includegraphics[width=0.07\textwidth]{auxiliar/static/dedo.png}} ;
         \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;

         \node[const, above=of p1, yshift=.15cm] (fp1) {$1/2$};
         \node[const, above=of p2, yshift=.15cm] (fp2) {$0$};
         \node[const, above=of p3, yshift=.15cm] (fp3) {$1/2$};
         \node[const, below=of p2, yshift=-.10cm, xshift=0.3cm] (dedo) {};

        }
}

\end{textblock}



\begin{textblock}{80}(0,18)
\centering
\tikz{

    \node[latent] (d) {\includegraphics[width=0.10\textwidth]{auxiliar/static/dedo.png}} ;
    \node[const,left=of d] (nd) {\Large $s$} ;

    \node[latent, above=of d, xshift=-1.5cm] (r) {\includegraphics[width=0.12\textwidth]{auxiliar/static/regalo.png}} ;
    \node[const,left=of r] (nr) {\Large $r$} ;


    \node[latent, fill=black!30, above=of d, xshift=1.5cm] (c) {\includegraphics[width=0.12\textwidth]{auxiliar/static/cerradura.png}} ;
    \node[const,left=of c] (nc) {\Large $c$} ;

    \edge {r,c} {d};
}

\vspace{0.75cm}
\onslide<-1>{
\tikz{
         \node[factor, minimum size=1cm] (p1) {\includegraphics[width=0.07\textwidth]{auxiliar/static/cerradura.png}} ;
         \node[det, minimum size=1cm, xshift=1.5cm] (p2) {\includegraphics[width=0.07\textwidth]{auxiliar/static/dedo.png}} ;
         \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;

         \node[const, above=of p1, yshift=.15cm] (fp1) {$1/3$};
         \node[const, above=of p2, yshift=.15cm] (fp2) {$0$};
         \node[const, above=of p3, yshift=.15cm] (fp3) {$2/3$};
         \node[const, below=of p2, yshift=-.10cm, xshift=0.3cm] (dedo) {};

        }
}

\end{textblock}


\only<2>{
\begin{textblock}{160}(0,70)
\centering \Large ¿Y el acuerdo intersubjetivo respecto de los modelos?  \\[0.2cm] \large
$P(\text{Modelo}_i|\text{Datos})$

\end{textblock}
}

\end{frame}



\begin{frame}[plain,fragile]
\begin{textblock}{160}(0,4)
\centering \LARGE Evaluación de modelos causales
\end{textblock}
\vspace{1cm}

\only<-5>{
\begin{textblock}{160}(0,18)
\begin{equation*}
 P(\text{Modelo}_i|\text{Datos}) = \frac{\overbrace{P(\text{Datos}|\text{Modelo}_i)}^{\text{\small Evidencia} } P(\text{Modelo}_i)}{ P(\text{Datos})}
\end{equation*}
\end{textblock}
}
%
% \only<2>{
% \begin{textblock}{160}(0,44)
% \begin{equation*}
% P(\text{Hip\'otesis}_i|\,\text{Datos, Modelo}) = \frac{P(\text{Datos}\,|\,\text{Hip\'otesis$_i$, Modelo}) P(\text{Hip\'otesis}_i|\text{ Modelo})} {\underbrace{P(\text{Datos }|\text{ Modelo})}_{\hfrac{\text{\footnotesize Predicción a priori}}{\text{\footnotesize o evidencia}}} }
% \end{equation*}
% \end{textblock}
% }
%

%
% \only<3-4>{
% \begin{textblock}{160}(0,42)
%  \begin{equation*}
% \begin{split}
%  \frac{P(\text{Modelo}_A|\text{Datos})}{P(\text{Modelo}_B|\text{Datos})} = \frac{P(\text{Datos}|\text{Modelo}_A)} {P(\text{Datos}|\text{Modelo}_B)} \only<4>{\phantom}{\frac{P(\text{Modelo}_A)}{P(\text{Modelo}_B)}}
% \end{split}
% \end{equation*}
% \end{textblock}
% }

\only<2->{
\begin{textblock}{130}(18,38)
 \begin{flalign*}
 P(\text{Dat\en{a}\es{os}} = \{d_1, \, d_2, \, \dots \} | \, \text{Model\es{o}}) & =
\only<3>{ \text{\Large \,Regla de la suma}}
\only<4>{ \text{\Large \,Regla del producto}}
 \only<5->{P(d_1|\text{Model\es{o}})P(d_2|d_1,\text{Model\es{o}}) \dots} &&
\end{flalign*}
\end{textblock}
}


\only<6,10>{
\begin{textblock}{80}(60,22)
\tikz{
    \node[factor, minimum size=1cm] (p1) {\includegraphics[width=0.07\textwidth]{auxiliar/static/cerradura.png}} ;
    \node[factor, minimum size=1cm, xshift=1.5cm] (p2) {} ;
    \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;
}
\end{textblock}
}
\only<7-8>{
\begin{textblock}{80}(60,22)
\tikz{
    \node[factor, minimum size=1cm] (p1) {\includegraphics[width=0.07\textwidth]{auxiliar/static/cerradura.png}} ;
    \node[det, minimum size=1cm, xshift=1.5cm] (p2) {\includegraphics[width=0.07\textwidth]{auxiliar/static/dedo.png}} ;
    \node[factor, minimum size=1cm, xshift=3cm] (p3) {} ;
}
\end{textblock}
}
\only<9>{
\begin{textblock}{80}(60,22)
\tikz{
    \node[det, minimum size=1cm] (p1) {\includegraphics[width=0.07\textwidth]{auxiliar/static/regalo.png}} ;
    \node[det, minimum size=1cm, xshift=1.5cm] (p2) {} ;
    \node[det, minimum size=1cm, xshift=3cm] (p3) {} ;
}
\end{textblock}
}
\only<11-12>{
\begin{textblock}{80}(60,22)
\tikz{
    \node[factor, minimum size=1cm] (p1) {\includegraphics[width=0.07\textwidth]{auxiliar/static/cerradura.png}} ;
    \node[factor, minimum size=1cm, xshift=1.5cm] (p2) {} ;
    \node[det, minimum size=1cm, xshift=3cm] (p3) {\includegraphics[width=0.07\textwidth]{auxiliar/static/dedo.png}} ;
}
\end{textblock}
}
\only<13>{
\begin{textblock}{80}(60,22)
\tikz{
    \node[det, minimum size=1cm] (p1) {} ;
    \node[det, minimum size=1cm, xshift=1.5cm] (p2) {\includegraphics[width=0.07\textwidth]{auxiliar/static/regalo.png}} ;
    \node[det, minimum size=1cm, xshift=3cm] (p3) {} ;
}
\end{textblock}
}


\only<6>{
\begin{textblock}{80}(0,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
\phantom{$\bm{s_2}$} & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, & \phantom{$\bm{1/2}$} \\ \hline
  $s_1$ & $0$ & $0$ & $0$ &   $0$ \\ \hline
  $s_2$ & $1/6$ & $0$ & $1/3$ &  $1/2$ \\  \hline
  $s_3$ & $1/6$ & $1/3$ & $0$ & $1/2$ \\ \hline
  \end{tabular}
\end{textblock}
}
\only<7>{
\begin{textblock}{80}(0,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
\phantom{$\bm{s_2}$} & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, &  \phantom{$\bm{1/2}$}  \\ \hline
  $\gray s_1$ & $\gray0$ & $\gray0$ & $\gray0$ &   $\gray 0$ \\ \hline
  $\bm{s_2}$ & $1/6$ & $0$ & $1/3$ &  $\bm{1/2}$ \\  \hline
  $\gray s_3$ & $\gray1/6$ & $\gray1/3$ & $\gray0$ & $\gray1/2$ \\ \hline
  \end{tabular}
\end{textblock}
}
\only<8>{
\begin{textblock}{80}(0,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
\phantom{$\bm{s_2}$} & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, & \phantom{$\bm{1/2}$}  \\ \hline
            & & &  &  \\ \hline
  $s_2$ & $1/3$ & $0$ & $2/3$ &  1 \\  \hline
 & & & &\\ \hline
  \end{tabular}
\end{textblock}
}
\only<9>{
\begin{textblock}{80}(0,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
\phantom{$\bm{s_2}$} & \, $\bm{r_1}$ \, &  \, $r_2$ \, & \, $r_3$ \, & \phantom{$\bm{1/2}$}  \\ \hline
            & & &  &  \\ \hline
  $s_2$ & $\bm{1/3}$ & $0$ & $2/3$ &  1 \\  \hline
 & & & &\\ \hline
  \end{tabular}
\end{textblock}
}
\only<10>{
\begin{textblock}{80}(0,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
\phantom{$\bm{s_2}$} & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, & \phantom{$\bm{1/2}$} \\ \hline
  $s_1$ & $0$ & $0$ & $0$ &   $0$ \\ \hline
  $s_2$ & $1/6$ & $0$ & $1/3$ &  $1/2$ \\  \hline
  $s_3$ & $1/6$ & $1/3$ & $0$ & $1/2$ \\ \hline
  \end{tabular}
\end{textblock}
}
\only<11>{
\begin{textblock}{80}(0,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
\phantom{$\bm{s_2}$} & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, &  \phantom{$\bm{1/2}$}  \\ \hline
  $\gray s_1$ & $\gray0$ & $\gray0$ & $\gray0$ &   $\gray 0$ \\ \hline
  $\gray s_2$ & $\gray1/6$ & $\gray0$ & $\gray1/3$ &  $\gray1/2$ \\  \hline
  $\bm{s_3}$ & $1/6$ & $1/3$ & $0$ & $\bm{1/2}$ \\ \hline
  \end{tabular}
\end{textblock}
}
\only<12>{
\begin{textblock}{80}(0,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
\phantom{$\bm{s_2}$} & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, & \phantom{$\bm{1/2}$}  \\ \hline
            & & &  &  \\ \hline
 & & & &\\ \hline
 $s_3$ & $1/3$ & $2/3$ & $0$ &  1 \\  \hline
  \end{tabular}
\end{textblock}
}
\only<13>{
\begin{textblock}{80}(0,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
\phantom{$\bm{s_2}$} & \, $r_1$ \, &  \, $\bm{r_2}$ \, & \, $r_3$ \, & \phantom{$\bm{1/2}$}  \\ \hline
            & & &  &  \\ \hline
 & & & &\\ \hline
 $s_3$ & $1/3$ & $\bm{2/3}$ & $0$ &  1 \\  \hline
  \end{tabular}
\end{textblock}
}
\only<6>{
\begin{textblock}{80}(80,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
\phantom{$\bm{s_2}$} & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, & \phantom{$\bm{1/3}$}  \\ \hline
  $s_1$ & $0$ & $1/6$ & $1/6$ &   $1/3$ \\ \hline
  $s_2$ & $1/6$ & $0$ & $1/6$ &  $1/3$ \\  \hline
  $s_3$ & $1/6$ & $1/6$ & $0$ & $1/3$ \\ \hline
  \end{tabular}
\end{textblock}
}
\only<7>{
\begin{textblock}{80}(80,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
 \phantom{$\bm{s_2}$} & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, & \phantom{$\bm{1/3}$} \\ \hline
  $\gray s_1$ & $\gray0$ & $\gray1/6$ & $\gray1/6$ &   $\gray 1/3$ \\ \hline
  $\bm{s_2}$ & $1/6$ & $0$ & $1/6$ &  $\bm{1/3}$ \\  \hline
  $\gray s_3$ & $\gray1/6$ & $\gray1/6$ & $\gray0$ & $\gray1/3$ \\ \hline
  \end{tabular}
\end{textblock}
}
\only<8>{
\begin{textblock}{80}(80,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
\phantom{$\bm{s_2}$} & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, & \phantom{$\bm{1/2}$}  \\ \hline
            & & &  &  \\ \hline
  $s_2$ & $1/2$ & $0$ & $1/2$ &  1 \\  \hline
 & & & &\\ \hline
  \end{tabular}
\end{textblock}
}
\only<9>{
\begin{textblock}{80}(80,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
\phantom{$\bm{s_2}$} & \, $\bm{r_1}$ \, &  \, $r_2$ \, & \, $r_3$ \, & \phantom{$\bm{1/2}$}  \\ \hline
            & & &  &  \\ \hline
  $s_2$ & $\bm{1/2}$ & $0$ & $1/2$ &  1 \\  \hline
 & & & &\\ \hline
  \end{tabular}
\end{textblock}
}
\only<10>{
\begin{textblock}{80}(80,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
\phantom{$\bm{s_2}$} & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, & \phantom{$\bm{1/3}$}  \\ \hline
  $s_1$ & $0$ & $1/6$ & $1/6$ &   $1/3$ \\ \hline
  $s_2$ & $1/6$ & $0$ & $1/6$ &  $1/3$ \\  \hline
  $s_3$ & $1/6$ & $1/6$ & $0$ & $1/3$ \\ \hline
  \end{tabular}
\end{textblock}
}
\only<11>{
\begin{textblock}{80}(80,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
 \phantom{$\bm{s_2}$} & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, & \phantom{$\bm{1/3}$} \\ \hline
  $\gray s_1$ & $\gray0$ & $\gray1/6$ & $\gray1/6$ &   $\gray 1/3$ \\ \hline
  $\gray s_2$ & $\gray1/6$ & $\gray0$ & $\gray1/6$ &  $\gray1/3$ \\  \hline
  $\bm{s_3}$ & $1/6$ & $1/6$ & $0$ & $\bm{1/3}$ \\ \hline
  \end{tabular}
\end{textblock}
}
\only<12>{
\begin{textblock}{80}(80,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
\phantom{$\bm{s_2}$} & \, $r_1$ \, &  \, $r_2$ \, & \, $r_3$ \, & \phantom{$\bm{1/2}$}  \\ \hline
            & & &  &  \\ \hline
 & & & &\\ \hline
 $s_3$ & $1/2$ & $1/2$ & $0$ &  1 \\  \hline
  \end{tabular}
\end{textblock}
}
\only<13>{
\begin{textblock}{80}(80,52) \centering
\begin{tabular}{|c|c|c|c||c|} \hline  \setlength\tabcolsep{0.4cm}
\phantom{$\bm{s_2}$} & \, $r_1$ \, &  \, $\bm{r_2}$ \, & \, $r_3$ \, & \phantom{$\bm{1/2}$}  \\ \hline
            & & &  &  \\ \hline
 & & & &\\ \hline
 $s_3$ & $1/2$ & $\bm{1/2}$ & $0$ &  1 \\  \hline
  \end{tabular}
\end{textblock}
}



\begin{textblock}{80}(0,73) \centering
 \begin{equation*}
 \onslide<6->{ P(\text{D}|\text{M}) }  \onslide<7->{= \frac{1}{2}} \, \onslide<9->{\frac{1}{3}} \, \onslide<11->{\frac{1}{2}} \, \onslide<13>{\frac{2}{3}}
 \end{equation*}
\end{textblock}
\begin{textblock}{80}(80,73) \centering
\begin{equation*}
 \onslide<6->{ P(\text{D}|\text{M})}  \onslide<7->{= \frac{1}{3}} \, \onslide<9->{\frac{1}{2}} \, \onslide<11->{\frac{1}{3}} \, \onslide<13>{\frac{1}{2}}
 \end{equation*}
\end{textblock}



\end{frame}



\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \LARGE Evaluación de modelos causales
%\\ \Large Datos generados con el modelo Monty Hall
\end{textblock}
%
% \begin{textblock}{160}(14,12)
% \begin{equation*}
%  P(\text{Modelo}|\text{Datos}) = \frac{\only<1->{\overbrace{P(\text{Data}|\text{Modelo})}^{\text{\footnotesize Predicción a priori}}} \only<1->{P(\text{Modelo})} }{ P(\text{Data})} \phantom{\frac{\overbrace{P(\text{Datos}|\text{Modelo})}^{\text{Evidencia}}}{ P(\text{Datos})}}
% \end{equation*}
% \end{textblock}
% %
% \only<2>{
% \begin{textblock}{160}(0,47)
% \begin{align*}
% P(\text{Data}|\text{Modelo}) & = \sum_{i} P(\text{Data}|\text{Hypothesis}_i,\text{Model}) P(\text{Hypothesis}_i|\text{Model})
% \end{align*}
% \end{textblock}
% }



\only<1>{

\begin{textblock}{140}(10,26)
\centering
\includegraphics[width=0.66\textwidth]{figuras/monty_hall_selection.pdf} \hspace{2cm}
\end{textblock}

\begin{textblock}{80}(86,26)
\centering
\scalebox{0.5}{
\tikz{

    \node[latent] (d) {\includegraphics[width=0.10\textwidth]{auxiliar/static/dedo.png}} ;
    \node[const,left=of d] (nd) {\Large $s$} ;

    \node[latent, above=of d, xshift=-1.5cm] (r) {\includegraphics[width=0.12\textwidth]{auxiliar/static/regalo.png}} ;
    \node[const,left=of r] (nr) {\Large $r$} ;


    \node[latent, fill=black!30, above=of d, xshift=1.5cm] (c) {\includegraphics[width=0.12\textwidth]{auxiliar/static/cerradura.png}} ;
    \node[const,left=of c] (nc) {\Large $c$} ;

    \edge {r,c} {d};
}
}
\end{textblock}


\begin{textblock}{80}(86,60)
\centering
\scalebox{0.5}{
 \tikz{
    \node[latent,] (r) {\includegraphics[width=0.12\textwidth]{auxiliar/static/regalo.png}} ;
    \node[const,left=of r] (nr) {\Large $r$} ;


    \node[latent, below=of r] (d) {\includegraphics[width=0.10\textwidth]{auxiliar/static/dedo.png}} ;
    \node[const, left=of d] (nd) {\Large $s$} ;

    \edge {r} {d};

}
}
\end{textblock}
}

\end{frame}

%
%
%
% \begin{frame}[plain]
% \begin{textblock}{160}(0,4)
%  \centering \LARGE Boole \\
%  \large Valor de verdad continuo
%  \end{textblock}
%  \vspace{1.5cm} \centering
%
%  \includegraphics[width=1\textwidth]{auxiliar/static/boole.png}
%
%  \normalsize
%  \hfill George Boole (1854) \href{https://downloads.tuxfamily.org/openmathdep/logic_ante_1900/Laws_of_Thought-Boole.pdf}{\emph{An Investigation of the Laws of Thought}}
% \end{frame}

%
% \begin{frame}[plain]
% \begin{textblock}{160}(0,4)
%  \centering \LARGE Lógica de primer orden extendida \\
%  \Large (De una práctica suspendida)
%  \end{textblock}
%  \vspace{1.5cm}
%
% Dado \ \ $A \Rightarrow B  \equiv P(B|A) = 1$
%
% \pause
%
% $\bullet$ \ \ $P(B|A) = 1$ (modus ponens) \\
% $\bullet$ \ \ $P(\neg A| \neg B) = 1$ (modus tollens) \\
% \pause
% $\bullet$ \ \ $P(B| \neg A) \leq P(B) $ ($A$ falso implica $B$ menos plausible)
% $\bullet$ \ \ $P(A|B) \geq P(A) $ ($B$ verdadero implica $A$ más plausible)
%
%  \vspace{0.6cm}
%
% Dado \ \ $P(B|A) \geq P(B)$ ($A$ verdadero, luego $B$ más plausible) \\
%
% \pause
%
% $\bullet$ \ \ $P(B|\neg A) \leq P(B)$ ($A$ falso, luego $B$ menos plausible) \\
% $\bullet$ \ \ $P(A|B) \geq P(A)$ ($B$ verdadero, luego $A$ más plausible) \\
% $\bullet$ \ \ $P(\neg A|\neg B) \geq P(\neg A)$ ($B$ falso, luego $A$ menos plausible)
%
%
% \end{frame}
%
%
% \begin{frame}[plain]
% \begin{textblock}{160}(0,4)
%  \centering \LARGE El problema de la lógica extendida \\
%  \large La complejidad en memoria
%  \end{textblock}
%  \vspace{1.5cm}
%
%  Tenemos $n=27$ variables, las letras del alfabeto \\
%
%  \pause
%
%  \vspace{0.5cm}
%
%  $\bullet$ En lógica binaria asignamos valores a las variables, y con las reglas de la lógica calculamos las combinaciones. \pause Con 27 bits nos alcanza.  \\
%
%  \vspace{0.5cm}
%
%  \pause
%
%  $\bullet$ En lógica extendida debemos asignar una probabilidad a cada posible combinación de todos los posibles combinaciones de valores de verdad.  \\
%
%  \vspace{0.2cm}
%   \pause
%
%   Necesitamos guardar $2^{27}-1$ números reales  \\[0.2cm]
%
%  \Wider[-2cm]{
%  \begin{itemize}
%  \item[$1$:] $P(A, B, \dots, Z) =  \dots$ \\
%  \item[$.$:] $\dots$ \\
%  \item[$2^{27}-1$:] $P(\neg A, \neg B, \dots, Z) =  \dots$ \\
%  \item[$2^{27}$:] $P(\neg A, \neg B, \dots, \neg Z) =  1 - \sum P(\dots)$
%  \end{itemize}
%  }
% \end{frame}
%



\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \LARGE El problema histórico \\
\large Costo computacional
\end{textblock}

\only<2->{
\begin{textblock}{160}(0,28) \centering
\Large La aplicación estricta de las reglas de la probabilidad \\[0.1cm]

\large
\textbf{obligan a evaluar todo el espacio de hipótesis}.

\end{textblock}
}

\begin{textblock}{120}(20,50)
\only<3->{$\bullet$ Siglo 18: Nace la probabilidad}

\only<4->{$\bullet$ Siglo 19: Física estadística}

\only<5->{$\bullet$ Siglo 20: Frecuentismo}

\only<6->{$\bullet$ Siglo 21: Comienza a ser posible aplicar las reglas de la probabilidad de forma estricta en todos los campos de la ciencia}
\end{textblock}

\end{frame}



\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering  \LARGE Modelo lineal
\end{textblock}


\begin{textblock}{160}(0,18)
\begin{equation*}
\begin{split}
y & = w_0 + w_1 x \\[0.2cm]
p(t | x, \bm{w}, \beta ) &= \N(t \,|\, y(x, \bm{w}), \beta^2) \\[0.6cm]
\onslide<2->{
p(w_i) &= \N(w_i \,|\, 0, \sigma_{i}^2) \\[0cm]}
\end{split}
\end{equation*}
\end{textblock}

\only<3->{
\begin{textblock}{160}(0,54)
\begin{figure}[H]
    \centering
    \tikz{

    \node[latent, fill=black!100, minimum size=2pt] (x) {} ; %
    \node[const, right=of x] (c_x) {$x_i$};
    \node[latent, fill=black!20, yshift=-1.5cm] (t) {$t_i$} ; %
    \node[latent, fill=black!100, yshift=-1.5cm , xshift=-2cm,minimum size=2pt] (beta)
    {} ; %
    \node[const, above=of beta] (c_beta) {$\beta$};
    \node[latent, fill=black!0, yshift=-1.5cm, xshift=2cm] (w) {$\bm{w}$};
    \node[latent, fill=black!100, xshift=2cm, minimum size=2pt] (alpha) {} ; %
    \node[const, right=of alpha] (c_alpha) {$\sigma$};

    \edge {x,beta,w} {t};
    \edge {alpha} {w};

    \node[invisible, fill=black!0, minimum size=0pt, xshift=0.52cm] (data_inv) {} ; %

    \plate {no} {(x)(t)(data_inv)} {$i: $ Datos}; %
    }
\end{figure}
\end{textblock}
}

\end{frame}


\begin{frame}[plain]

\Wider[-3cm]{
 \begin{figure}
\begin{subfigure}[t]{0.32\textwidth}
\onslide<3->{\caption*{Verosimilitud}}
\end{subfigure}
\begin{subfigure}[t]{0.32\textwidth}
\caption*{Priori\onslide<3->{/Posteriori}}
\includegraphics[width=\textwidth]{figuras/pdf/linearRegression_posterior_0.pdf}
\end{subfigure}
\begin{subfigure}[t]{0.32\textwidth}
\onslide<2->{
\caption*{Espacio de datos}
\includegraphics[width=\textwidth]{figuras/pdf/linearRegression_dataSpace_0.pdf}}
\end{subfigure}


\begin{subfigure}[c]{0.32\textwidth}
\onslide<3->{\includegraphics[width=\textwidth]{figuras/pdf/linearRegression_likelihood_1.pdf}}
\end{subfigure}
\begin{subfigure}[c]{0.32\textwidth}
\onslide<3->{\includegraphics[width=\textwidth]{figuras/pdf/linearRegression_posterior_1.pdf}}
\end{subfigure}
\begin{subfigure}[c]{0.32\textwidth}
\onslide<3->{\includegraphics[width=\textwidth]{figuras/pdf/linearRegression_dataSpace_1.pdf}}
\end{subfigure}

\begin{subfigure}[c]{0.32\textwidth}
\onslide<4->{\includegraphics[width=\textwidth]{figuras/pdf/linearRegression_likelihood_2.pdf}}
\end{subfigure}
\begin{subfigure}[c]{0.32\textwidth}
\onslide<4->{\includegraphics[width=\textwidth]{figuras/pdf/linearRegression_posterior_2.pdf}}
\end{subfigure}
\begin{subfigure}[c]{0.32\textwidth}
\onslide<4->{\includegraphics[width=\textwidth]{figuras/pdf/linearRegression_dataSpace_2.pdf}}
\end{subfigure}

\end{figure}
}
\end{frame}



\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \Large Modelos lineales
\end{textblock}
 \vspace{1.25cm}

\only<1->{
\begin{textblock}{80}(0,18)\centering
\ \ Función objetivo \\

$\N(y \,| \, \text{sen}(x), \beta^2) \ \ x \in [-\pi,\pi]$ \\[0.2cm]

       \includegraphics[width=0.85\textwidth]{figuras/pdf/model_selection_true_and_sample}
\end{textblock}
}

\only<2->{
\begin{textblock}{80}(75,22)
\begin{align*}
y &= w_0 + w_1 \, x + w_2 \, x^2 + w_3 \, x^3 \\[1cm]
\onslide<3->{& y  = \sum_{i=0}^{M-1} w_i \phi_i(x) = \bm{w}^T \bm{\phi}(x) \\[0.1cm]
\text{¿}&\text{Cuál es el mejor modelo lineal?}
}
\end{align*}
\end{textblock}
}

\end{frame}



\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \LARGE Siglo 20: Frecuentismo \\
\large \sout{Evaluación} Selección de hipótesis
\end{textblock}


\only<1-10>{
\begin{textblock}{160}(0,14) \centering
\begin{equation*}
 \underset{\bm{w}}{\text{ max }} P(\bm{t} | \bm{x}, \bm{w}, \beta) = \underset{\bm{w}}{\text{ min }} \sum_{i=1}^{n}  (t_i - \bm{w}^T\bm{\phi}(\bm{x}_i))^2
\end{equation*}
\end{textblock}
}


\only<11>{
\begin{textblock}{160}(0,20) \centering
\Large ¿Qué pasa si empezamos a ver datos $x \notin [-\pi,\pi]$?
\end{textblock}
}


\begin{textblock}{80}(0,34)\centering
\only<2-3>{\includegraphics[width=0.9\textwidth]{figuras/pdf/model_selection_OLS.pdf}}\only<4>{\includegraphics[width=0.9\textwidth]{figuras/pdf/model_selection_OLS_best-at-train.pdf}}
\end{textblock}



\only<3-4>{
\begin{textblock}{80}(80,35)\centering
\includegraphics[width=0.9\textwidth]{figuras/pdf/model_selection_maxLikelihood.pdf}
\end{textblock}
}


\only<5-9>{
\begin{textblock}{140}(10,36)\centering
\begin{align*}
P(\text{dato}|\text{Modelo}) & = \only<6->{\phantom}{\sum_{\text{hipótesis}}}  P(\text{dato} \, | \, \text{hipótesis}, \text{Modelo}) \only<6->{\phantom}{P(\text{hipótesis} | \text{Modelo})} \\
\only<7->{& = P(\text{dato} \, | \, \overbrace{\underset{h}{\text{arg max}} \ P(\text{dato}|h, \text{Modelo})}^{\text{Hipótesis que mejor predice}},  \, \text{Modelo} )} \\[0.5cm]
\onslide<9>{P(\text{dato}_{\textbf{Testear}}|\text{Modelo}) & = P(\text{dato}_{\textbf{Testear}} \, | \, \underset{h}{\text{arg max}} \ P(\text{dato}_{\textbf{Entrenar}}|h, \text{Modelo}),  \, \text{Modelo} )}
\end{align*}

\onslide<9>{Testeo y Entrenamiento}

\end{textblock}
}


\only<8>{
\begin{textblock}{140}(10,72)\centering
\Large

¿Predecimos o ``post-decimos''?
\end{textblock}
}



\only<10->{
\begin{textblock}{160}(0,33.5)\centering
\phantom{y} Con testeo y entrenamiento

\includegraphics[width=0.43\textwidth]{figuras/pdf/model_selection_OLS_best-at-test.pdf} \hspace{0.4cm}
\onslide<10->{\includegraphics[width=0.42\textwidth]{figuras/pdf/model_selection_maxApriori_online.pdf}}
\end{textblock}
}


\end{frame}



\begin{frame}[plain]

\centering
\LARGE

¿La aplicación estricta de la probabilidad  \\

produce sobreajuste (\textit{overfitting})?


\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \LARGE La función de costo epistémica \\
\end{textblock}


\begin{textblock}{160}(0,22) \centering
\Large Todos los datos son de testeo y entrenamiento:
\large
\begin{equation*}
\underbrace{P(\text{\En{Data}\Es{Datos}} = \{d_1, d_2, \dots \}|\text{Modelo})}_{\text{\small Evidencia: predicción del modelo}}  =  \underbrace{P(d_1 |\text{Modelo})}_{\text{\small Predic\En{tion}\Es{ción} 1}} \, \underbrace{P(d_2 | d_1 , \text{Modelo})}_{\text{\small Predic\En{tion}\Es{ción} 2}} \dots
\end{equation*}
\end{textblock}

\only<2->{
\begin{textblock}{140}(10,56)\centering
\Large La predicción se hace con todas las hipótesis \large
\begin{align*}
P(\text{dato}_1|\text{Modelo}) & = \sum_{\text{hipótesis}}  P(\text{dato}_1| \text{hipótesis}, \text{Modelo}) P(\text{hipótesis} | \text{Modelo}) \\[0.2cm]
%\onslide<3>{P(\text{Datos}) & = \sum_{\text{Modelo}} P(\text{Datos}\,| \text{Modelo}) \, P(\text{Modelo})}
\end{align*}
\end{textblock}
}


\end{frame}


\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering  \LARGE Siglo 21: Enfoque bayesiano \\
\large Aplicación estricta de las reglas de la probabilidad
\end{textblock}

\begin{textblock}{80}(80,22)\Large
\begin{equation*}
P(\text{Modelo}|\text{Datos})
\end{equation*}
\end{textblock}


\begin{textblock}{160}(0,32)
     \centering
       \includegraphics[width=0.45\textwidth]{figuras/pdf/model_selection_MAP_non-informative}
       \includegraphics[width=0.445\textwidth]{figuras/pdf/model_selection_evidence}
\end{textblock}

\end{frame}



\begin{frame}[plain]
\begin{textblock}{160}(0,4)
\centering \LARGE  Evidencia \\
\large Balance natural de la complejidad por predicci\'on
\end{textblock}


 \begin{textblock}{120}(20,20)
  \centering
  \includegraphics[width=0.9\textwidth, page=2]{figuras/pdf/evidencia_de_modelos_alternativos}
 \end{textblock}

\end{frame}




\begin{frame}[plain,noframenumbering]

\begin{textblock}{160}(0,0)
\includegraphics[width=1\textwidth]{auxiliar/static/peligro_predador}
\end{textblock}

\begin{textblock}{160}(127,67)
\LARGE \textcolor{black!5}{\fontsize{22}{0}\selectfont \textbf{Inferencia  \\[-0.1cm] \hspace{0.5cm} causal}}
\end{textblock}

\begin{textblock}{55}(2,3)
\begin{turn}{0}
\parbox{15cm}{\small
\textcolor{black!95}{Flujos de inferencia en modelos causales. Efecto de}\\
\textcolor{black!95}{las intervenciones en modelos causales. Conclusiones} \\
\textcolor{black!95}{causales a partir de datos observables. Identificación} \\
\textcolor{black!95}{de modelo causal.} \\
\normalsize\textcolor{black!95}{Unidad 2} \\
}
\end{turn}
\end{textblock}

\end{frame}



%
% \begin{frame}[plain,noframenumbering]
%
% \centering
% \Huge Teorías causales \\
%
% \Large O sistemas de modelos causales
%
% \end{frame}
%

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Identificación de efecto causal\\
 \large Con observación, sin intervenciones.
 \end{textblock}
 \vspace{0.75cm}


\only<1-2>{
\begin{textblock}{140}(10,27) \centering
\includegraphics[width=0.70\textwidth, page=1]{figuras/simpson.pdf}
\end{textblock}
}
\only<3->{
\begin{textblock}{140}(10,27) \centering
\includegraphics[width=0.70\textwidth, page=2]{figuras/simpson.pdf}
\end{textblock}
}


\only<1-4>{
\begin{textblock}{150}(5,14) \small
\begin{flalign*}
& P(\text{Derrumbes}|do(\text{Intensidad del sismo})) \overset{?}{=}  \onslide<4>{\sum_{\text{Ciudad}}} \only<2>{P(\text{Derrumbes}|\text{Intensidad del sismo})} \only<3-4>{P(\text{Derrumbes}|\text{Intensidad del sismo}, \text{Ciudad})} \onslide<4>{P(\text{Ciudad})}
&&
\end{flalign*}
\end{textblock}
}

\only<5>{
\begin{textblock}{150}(5,18) \centering
\textbf{Para distinguir el efecto causal necesitamos conocer el modelo causal}
\end{textblock}
}




\end{frame}



\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Identificación de modelo causal\\
 \large Con observaciones, sin intervenciones
\end{textblock}
 \centering
 \vspace{0.75cm}

\begin{textblock}{70}(5,18)
\raggedleft
 \tikz{
    \node[det] (a) {$A_{_{\onslide<6->{\phantom}{i}}}$} ; %
    \node[det, below=of a] (b) {$B_{_{\onslide<6->{\phantom}{i}}}$} ; %
    \node[const, left= of a, xshift=-0.3cm, yshift=0.1cm] (pa) { \small
    \begin{tabular}{|c|c|}
          $A=0$  &  $A=1$   \\ \hline
        $0.5$ & $0.5$   \\ \hline
    \end{tabular}
    }; %
    \node[const, above= of pa] (npa) {\small$P(A)$};


    \node[const, left=of b, xshift=-0.3cm, yshift=-0.1cm] (pb) { \small
    \begin{tabular}{c|c|c|}
        &  $B=0$  &  $B=1$   \\ \hline
       $A=0$ & $0.95$ & $0.05$   \\ \hline
       $A=1$ & $0.05$ & $0.95$   \\ \hline
    \end{tabular}
    };
    \node[const, above= of pb] (npb) {\small$P(B|A)$};

    \node[invisible, above=of a, yshift=1cm] (ia) {};

    \onslide<5->{\plate {datos} {(a)(b)} {\tiny$i$: Dato};}

    \edge {a} {b};
    }
\end{textblock}
\only<4->{
\begin{textblock}{70}(85,18)
\raggedright
    \tikz{
    \node[det] (a) {$A_{_{\onslide<6->{\phantom}{i}}}$} ; %
    \node[det, below=of a] (b) {$B_{_{\onslide<6->{\phantom}{i}}}$} ; %
    \node[const, right= of a, xshift=0.3cm, yshift=0.1cm] (pa) { \small
    \begin{tabular}{c|c|c|}
        &  $A=0$  &  $A=1$   \\ \hline
       $B=0$ & $0.95$ & $0.05$   \\ \hline
       $B=1$ & $0.05$ & $0.95$   \\ \hline
    \end{tabular}
    }; %
    \node[const, above= of pa] (npa) {\small$P(A|B)$};


    \node[const, right=of b, xshift=0.3cm, yshift=-0.1cm] (pb) { \small
    \begin{tabular}{|c|c|}
          $B=0$  &  $B=1$   \\ \hline
        $0.5$ & $0.5$   \\ \hline
    \end{tabular}
    };
    \node[const, above= of pb] (npb) {\small$P(B)$};

    \node[invisible, above=of a, yshift=1cm] (ia) {};

    \onslide<5->{\plate {datos} {(a)(b)} {\tiny$i$: Dato};}

    \edge {b} {a};
    }
\end{textblock}
}

\only<2-4>{
\begin{textblock}{140}(44,66)
\begin{flalign*}
& P(A, B) = P(A) P(B|A) \only<3->{= P(B) P(A|B)} &&
\end{flalign*}
\end{textblock}
}

\only<5-6>{
\begin{textblock}{160}(0,60)
\begin{equation*}
P(\text{Modelo} | \text{Datos} = \{(a_1, b_1), (a_2, b_2), \dots \}) = \onslide<5>{?} \onslide<6>{\frac{\overbrace{P(\text{Datos}|\text{Modelo})}^{\text{Predicción}} P(\text{Modelo})}{P(\text{Datos})}}
\end{equation*}
\end{textblock}
}

\only<7->{
\begin{textblock}{160}(0,66)
\begin{equation*}
P(\text{Datos}|\text{Modelo}_{A\rightarrow B}) =  P(\text{Datos}|\text{Modelo}_{B\rightarrow A})
\end{equation*}

\only<8>{Con mismas predicciones, no podemos distinguir el modelo causal!}
\only<9>{\textbf{Para distinguir el modelo causal necesitamos intervenciones do()}}

\end{textblock}
}


\end{frame}




\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Intervenciones

\Large El operador \textit{do}($x$)
\end{textblock}
 \vspace{0.75cm}


\begin{textblock}{160}(30,21)
\begin{flalign*}
\only<1>{& P(\,\,Y_i(t) = y\,\,) = P(Y = y|\textit{do}(T=t)) &&}
\only<2>{& P(\,\underbrace{Y_i(t) = y}_{\hfrac{\text{\small \phantom{p}Potential\phantom{p}}}{\text{\small outcome}}}\,) = P(Y = y|\textit{do}(T=t)) &&}
\only<3>{& P(\,\underbrace{Y_i(t) = y}_{\hfrac{\text{\small \phantom{p}Potential\phantom{p}}}{\text{\small outcome}}}\,) = P(Y = y|\textit{do}(T=t), \text{Modelo Causal}) &&}
\only<4->{& P(\,\underbrace{Y_i(t) = y}_{\hfrac{\text{\small \phantom{p}Potential\phantom{p}}}{\text{\small outcome}}}\,) = \underbrace{P(Y = y|\textit{do}(T=t), \text{Modelo Causal})}_{\hfrac{\text{\small Bayesian}}{\text{\small causal model}}} &&}
\end{flalign*}
\end{textblock}


\only<5->{
\begin{textblock}{160}(45,48)
\begin{flalign*}
& \text{ATE} = \E[\,y\,|\,\textit{do}(t=1)] - \E[\,y\,|\textit{do}(t=0)] &&
\end{flalign*}
\end{textblock}
}

\only<6>{
\begin{textblock}{160}(0,67)
\begin{align*}
& P( y | \textit{do}(t) ) \ \text{ es más general que } \ \E[y|\textit{do}(t)]
\end{align*}
\end{textblock}
}



%
% \only<3>{
% \begin{textblock}{160}(0,24)
% \begin{flalign*}
% & P(\,\underbrace{Y_i(t) = y}_{\hfrac{\text{\small \phantom{p}Potential\phantom{p}}}{\text{\small outcome}}}\,) = \underbrace{P(Y = y|\textit{do}(T=t), \text{Modelo Causal})}_{\hfrac{\text{\small Bayesian}}{\text{\small causal model}}} &&
% \begin{flalign*}
% \end{textblock}
% }

 \end{frame}



\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Inferencia causal \\
 \large Los \textbf{niveles} del razonamiento causal
\end{textblock}

 \vspace{0.75cm}

\only<1-3>{
\begin{textblock}{140}(10,24)
1. \textbf{Asociacional}:  $P(y \, | \, x , \, \text{Modelo Causal})$ \ y \ $P(\text{Modelo Causal} \, | \, x )$  \\[0.05cm] \normalsize
\hspace{0.3cm} Permite evaluar el efecto y el modelo causal sólo si se cumplen ciertas condiciones \\

\vspace{1cm} \large


\only<2-3>{
2. \textbf{Intervencional}:  $P(y \, | \, \text{do}(x), \, \text{Modelo Causal})$ \ y \ $P(\text{Modelo Causal} \, | \, y, \, \text{do}(x) )$ \\[0.05cm] \normalsize
\hspace{0.3cm} Permite evaluar tanto el efecto causal y el modelo causal
}

\vspace{0.7cm} \large

\only<3->{
3. \textbf{Contrafactual}:  $P(\overbrace{y \, | \, \text{do}(x),}^{\text{Contrafactual}} \, \overbrace{y^{\prime}, \, \text{do}(x^{\prime}),}^{\text{Factual}}\, \text{Modelo Causal})$ \\[0.05cm] \normalsize
\hspace{0.3cm} Permite evaluar el efecto causal contrafactual (no permite evaluar el modelo causal)
}
\end{textblock}
}

\only<4>{
\begin{textblock}{140}(10,36) \centering \Large
Estos niveles surgen naturalmente \\

del proceso generativo de lo datos
\end{textblock}
}

\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Monty Hall Causal \\
 \large \only<1>{Los \textbf{niveles} del razonamiento causal}\only<2>{Asociación}\only<3>{Intervención}\only<4-7>{Contrafáctico}\only<8->{Los \textbf{niveles} del razonamiento causal}
\end{textblock}
 \centering
 \vspace{0.75cm}


\only<2>{
\begin{textblock}{80}(5,22)
\raggedright
%\onslide<2->{Modelo gráfico} \\ \vspace{0.3cm}
 \tikz{
    \node[latent, minimum size=1.4cm] (r) {\includegraphics[width=0.12\textwidth]{auxiliar/static/regalo.png}} ;
    \node[const,above=of r] (pr) {\normalsize $P(r)$} ;

    \node[latent, below=of r,minimum size=1.4cm] (d) {\includegraphics[width=0.10\textwidth]{auxiliar/static/dedo.png}} ;
    \node[const,left=of d] (pd) {\normalsize $P(s|r)$} ;

\node[invisible,left=of d, xshift=-1.5cm] () {} ;


    \edge {r} {d};
}
\end{textblock}

\begin{textblock}{80}(65,24) \centering \Large
Asociación
\begin{equation*}
P(r, s)
\end{equation*}
\large
\begin{tabular}{c|c|c|c|}
         &  $r1$  &  $r2$ & $r3$   \\ \hline
       $s1$ & $0$ & $1/6$ & $1/6$ \\ \hline
       $s2$ & $1/6$ & $0$ & $1/6$ \\ \hline
       $s3$ & $1/6$ & $1/6$ & $0$ \\ \hline
    \end{tabular}
\end{textblock}
}



\only<3>{
\begin{textblock}{80}(5,22)
\raggedright
%\onslide<2->{Modelo gráfico} \\ \vspace{0.3cm}
 \tikz{

    \node[latent, minimum size=1.4cm] (d) {\includegraphics[width=0.10\textwidth]{auxiliar/static/dedo.png}} ;
    \node[const,left=of d] (pd) {\normalsize $P(s|r,c)$} ;

    \node[latent, above=of d, minimum size=1.4cm, xshift=1.2cm] (r) {\includegraphics[width=0.12\textwidth]{auxiliar/static/regalo.png}} ;
    \node[const,above=of r] (pr) {\normalsize $P(r)$} ;

    \node[latent, minimum size=1.4cm, fill=black!40, above=of d, xshift=-1.2cm] (c) {\includegraphics[width=0.12\textwidth]{auxiliar/static/cerradura.png}} ;
    \node[const,above=of c] (pc) {\normalsize $\text{do}(c1)$} ;


    \node[invisible,left=of d, xshift=-1.5cm] () {} ;



    \edge {r,c} {d};
}
\end{textblock}

\begin{textblock}{80}(65,24) \centering \Large
Intervención
\begin{equation*}
P(r, s| \text{do}(c1) )
\end{equation*}
\large
\begin{tabular}{c|c|c|c|}
         &  $r1$  &  $r2$ & $r3$   \\ \hline
       $s1$ & $0$ & $0$ & $0$ \\ \hline
       $s2$ & $1/6$ & $0$ & $1/3$ \\ \hline
       $s3$ & $1/6$ & $1/3$ & $0$ \\ \hline
    \end{tabular}
\end{textblock}
}


\only<4-7>{
\begin{textblock}{80}(5,22)
\raggedright
%\onslide<2->{Modelo gráfico} \\ \vspace{0.3cm}
 \tikz{

    \only<4-5>{
      \node[latent, minimum size=1.4cm, fill=black!15] (d) {\includegraphics[width=0.10\textwidth]{auxiliar/static/dedo.png}} ;
      \node[const,left=of d] (pd) {\normalsize $s=2$} ;

      \node[latent, minimum size=1.4cm, fill=black!40, above=of d, xshift=-1.2cm] (c) {\includegraphics[width=0.12\textwidth]{auxiliar/static/cerradura.png}} ;
      \node[const,above=of c] (pc) {\normalsize $\text{do}(c1)$} ;
       \edge {r,c} {d};
    }
    \only<6->{
      {\color{black!15}
      \node[latent, minimum size=1.4cm, fill=black!15, opacity=0.3] (d) {\includegraphics[width=0.10\textwidth]{auxiliar/static/dedo.png} } ;
      \node[const,left=of d] (pd) {\normalsize $s=2$} ;


      \node[latent, minimum size=1.4cm, fill=black!40, above=of d, xshift=-1.2cm, opacity=0.3] (c) {\includegraphics[width=0.12\textwidth]{auxiliar/static/cerradura.png}} ;
      \node[const,above=of c] (pc) {\normalsize $\text{do}(c1)$} ;
      \edge {r,c} {d};
      }
    }

      \node[latent, above=of d, minimum size=1.4cm, xshift=1.2cm] (r) {\includegraphics[width=0.12\textwidth]{auxiliar/static/regalo.png}} ;
      \node[const,above=of r] (pr) {\normalsize $P(r)$} ;

      \only<6->{
        \node[latent,  below=of r, xshift=1.2cm, minimum size=1.4cm] (d_prima) {\includegraphics[width=0.10\textwidth]{auxiliar/static/dedo.png} } ;
        \node[const,right=of d_prima] (pd_prima) {\normalsize $P(s^{\prime}|r,c^{\prime})$} ;

        \node[latent, minimum size=1.4cm, fill=black!40, above=of d_prima, xshift=1.2cm] (c_prima) {\includegraphics[width=0.12\textwidth]{auxiliar/static/cerradura.png}} ;
        \node[const,above=of c_prima] (pc_prima) {\normalsize $\text{do}(c^{\prime})=2$} ;
        \edge {r,c_prima} {d_prima};
      }

    \node[invisible,left=of d, xshift=-1.5cm] () {} ;



}
\end{textblock}
}

\only<5>{
\begin{textblock}{80}(65,24) \centering \Large
Factual
\begin{equation*}
P(r| \text{do}(c1), s2 )
\end{equation*}
\large
\begin{tabular}{|c|c|c|}
           $r1$  &  $r2$ & $r3$   \\ \hline
        $1/3$ & $0$ & $2/3$ \\ \hline
    \end{tabular}
\end{textblock}
}

\only<6-7>{
\begin{textblock}{80}(75,24) \centering \Large
Contra factual
\begin{equation*}
P(s^{\prime}, r | \text{do}(c1), s2 , \text{do}(c^{\prime}2))
\end{equation*}
\large
\only<7>{
\begin{tabular}{c|c|c|c|}
         &  $r1$  &  $r2$ & $r3$   \\ \hline
       $s^{\prime}1$ & $0$ & $0$ & $2/3$ \\ \hline
       $s^{\prime}2$ & $0$ & $0$ & $0$ \\ \hline
       $s^{\prime}3$ & $1/3$ & $0$ & $0$ \\ \hline
    \end{tabular}
}
\end{textblock}
}


\only<4-7>{
\begin{textblock}{140}(10,73) \centering \Large
¿Que caja hubiera señalado si hubieramos elegido la caja 2, \\
dado que elegimos la caja 1 y señaló la caja 2?
\end{textblock}
}

\only<8->{
\begin{textblock}{50}(4,28) \centering
\textbf{Asociación}
\begin{equation*}
P(r, s)
\end{equation*}
\large
\begin{tabular}{c|c|c|c|}
         &  $r1$  &  $r2$ & $r3$   \\ \hline
       $s1$ & $0$ & $1/6$ & $1/6$ \\ \hline
       $s2$ & $1/6$ & $0$ & $1/6$ \\ \hline
       $s3$ & $1/6$ & $1/6$ & $0$ \\ \hline
    \end{tabular}
\end{textblock}
}

\only<9->{
\begin{textblock}{50}(54,28) \centering
\textbf{Intervención}
\begin{equation*}
P(r, s| \text{do}(c1))
\end{equation*}
\large
\begin{tabular}{c|c|c|c|}
         &  $r1$  &  $r2$ & $r3$   \\ \hline
       $s1$ & $0$ & $0$ & $0$ \\ \hline
       $s2$ & $1/6$ & $0$ & $1/3$ \\ \hline
       $s3$ & $1/6$ & $1/3$ & $0$ \\ \hline
    \end{tabular}
\end{textblock}
}

\only<10->{
\begin{textblock}{50}(104,28) \centering
\textbf{Contra factual}
\begin{equation*}
P(s^{\prime}, r | \text{do}(c^{\prime}2), \text{do}(c1), s2) \ \
\end{equation*}
\large
\begin{tabular}{c|c|c|c|}
         &  $r1$  &  $r2$ & $r3$   \\ \hline
       $s^{\prime}1$ & $0$ & $0$ & $2/3$ \\ \hline
       $s^{\prime}2$ & $0$ & $0$ & $0$ \\ \hline
       $s^{\prime}3$ & $1/3$ & $0$ & $0$ \\ \hline
    \end{tabular}
\end{textblock}
}

\only<11>{
\begin{textblock}{160}(0,72) \centering
\textbf{Efecto causal}\\[-0.8cm]
\begin{align*}
\underbrace{P(r,s|\text{do}(c1), \text{Modelo Causal})}_{\text{Intervención 1}} - \underbrace{P(r,s|\text{do}(c2), \text{Modelo Causal})}_{\text{Intervención 2}}
\end{align*}
\end{textblock}
}

\only<12>{
\begin{textblock}{160}(0,72) \centering
\textbf{Efecto causal}\\ \Large
Suponemos que el modelo causal es correcto!

\large(está en el condicional)
\end{textblock}
}


\end{frame}


\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Identificación de efecto causal\\
 \large Con observación, sin intervenciones.
 \end{textblock}
 \vspace{0.75cm}


\only<1-3>{
\begin{textblock}{160}(0,24)
\begin{equation*}
P(y|\text{do}(T = 1) , \text{Modelo Causal}) - P(y|\text{do}(T = 0) , \text{Modelo Causal})
\end{equation*}
\end{textblock}
}

\only<2-3>{
\begin{textblock}{160}(0,44) \centering
\Large Para estimar el efecto causal sin hacer intervenciones \\
\Large necesitamos \textit{exchangeability}: $(Y \indep T \,|\, W)$

\vspace{0.6cm}

\only<3>{
¿Cómo determinamos las variables de control $W$?
}

\end{textblock}
}


\end{frame}




 \begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Flujo de inferencia en modelos causales\\
 \large Independencias condicionales
 \end{textblock}
 \centering
 \vspace{0.75cm}

 \begin{textblock}{68}(0,25)
 \tikz{
    \node[det] (l) {$l$} ; %
    \node[det, above=of l] (a) {$a$} ; %
    \node[det, above=of a,xshift=1.5cm] (t) {$t$} ; %
    \node[det, above=of a,xshift=-1.5cm] (e) {$e$} ; %
    \node[det, below=of t,xshift=1.5cm] (r) {$r$} ; %

    \edge {a} {l};
    \edge {t,e} {a};
    \edge {t} {r};

    \node[const, above= of e, yshift=0.1cm] (cpd_e) {Entradera:};
    \node[const, above= of t, yshift=0.1cm] (cpd_t) {Terremoto:};
    \node[const, left= of a, xshift=-0.1cm] (cpd_a) {Alarma:};
    \node[const, left= of r, xshift=-0.1cm] (cpd_r) {Redes:};
    \node[const, left= of l, xshift=-0.1cm] (cpd_l) {Llamada:};

    }
\end{textblock}


\only<1->{
\begin{textblock}{90}(68,24)
\centering
 \begin{tabular}{c c c}
 & \onslide<2->{$\hfrac{\text{Intermedio}}{\text{no observable}}$} &   \onslide<3->{$\hfrac{\text{Intermedio}}{\text{observable}}}$ \\
 & & \\
 $ e \rightarrow a \rightarrow l $    & \onslide<2->{$P(l) \overset{?}{=} P(l|e)$} & \onslide<3->{$P(l|a) \overset{?}{=} P(l|e,a)$} \\
 %$ l \leftarrow a \leftarrow t $      &  \onslide<4->{$P(t) \overset{?}{=} P(t|l)$}  & \onslide<5->{$P(t|a) \overset{?}{=} P(t|a,l)$} \\
 $ a \leftarrow t \rightarrow r $     & \onslide<4->{$P(r) \overset{?}{=} P(r|a)$} & \onslide<5->{$P(r|t) \overset{?}{=} P(r|t,a)$} \\
 $ e \rightarrow a \leftarrow t $     & \onslide<6->{$P(t) \overset{?}{=} P(t|e)$} & \onslide<7->{$P(t|a) \overset{?}{=} P(t|e,a)$} \\
            $\overset{\downarrow}{l}$  &  & \onslide<8->{$P(t|l) \overset{?}{=} P(t|e,l)$}
 \end{tabular}
 \end{textblock}
 }


 \end{frame}


 \begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Flujo de inferencia en modelos causales\\
 \large Independencias condicionales
 \end{textblock}
 \centering
 \vspace{0.75cm}

 \only<1-14>{
 \begin{textblock}{68}(0,25)
 \tikz{
    \node[det] (l) {$l$} ; %
    \node[det, above=of l] (a) {$a$} ; %
    \node[det, above=of a,xshift=1.5cm] (t) {$t$} ; %
    \node[det, above=of a,xshift=-1.5cm] (e) {$e$} ; %
    \node[det, below=of t,xshift=1.5cm] (r) {$r$} ; %

    \edge {a} {l};
    \edge {t,e} {a};
    \edge {t} {r};

    \node[const, above= of e, yshift=0.1cm] (cpd_e) {Entradera:};
    \node[const, above= of t, yshift=0.1cm] (cpd_t) {Terremoto:};
    \node[const, left= of a, xshift=-0.1cm] (cpd_a) {Alarma:};
    \node[const, left= of r, xshift=-0.1cm] (cpd_r) {Redes:};
    \node[const, left= of l, xshift=-0.1cm] (cpd_l) {Llamada:};

    }
\end{textblock}
}

\only<1-14>{
\begin{textblock}{90}(68,24)
\centering
 \begin{tabular}{c c c}
 & \onslide<1->{$\hfrac{\text{Intermedio}}{\text{no observable}}$} &   \onslide<1->{$\hfrac{\text{Intermedio}}{\text{observable}}}$ \\
 & & \\
 $ e \rightarrow a \rightarrow l $    & \only<1>{$P(l) \overset{?}{=} P(l|e)$}\only<2->{$P(l) \neq P(l|e)$} & \only<1-3>{$P(l|a) \overset{?}{=} P(l|e,a)$}\only<4->{$P(l|a) \overset{\phantom{?}}{=} P(l|e,a)$} \\
 $ a \leftarrow t \rightarrow r $     & \only<1-5>{$P(r) \overset{?}{=} P(r|a)$}\only<6->{$P(r) \neq P(r|a)$} & \only<1-7>{$P(r|t) \overset{?}{=} P(r|t,a)$}\only<8->{$P(r|t) \overset{\phantom{?}}{=} P(r|t,a)$} \\
 $ e \rightarrow a \leftarrow t $     & \only<1-9>{$P(t) \overset{?}{=} P(t|e)$}\only<10->{$P(t) \overset{\phantom{?}}{=} P(t|e)$} & \only<1-11>{$P(t|a) \overset{?}{=} P(t|e,a)$}\only<12->{$P(t|a) \neq P(t|e,a)$} \\
            $\overset{\downarrow}{l}$  &  & \only<1-13>{$P(t|l) \overset{?}{=} P(t|e,l)$}\only<14->{$P(t|l) \neq P(t|e,l)$}
 \end{tabular}
\end{textblock}
 }


\only<15-16>{
\begin{textblock}{140}(10,32) \Large
 Hay flujo de inferencia entre los extremos de una cadena si:

 \large (camino \textit{d-conectado}) \\[0.3cm]
 \begin{itemize}
  \item[$\bullet$] Todas las consecuencias comunes (o sus descendientes) son observables
  \item[$\bullet$] Ninguna otra variable es observable
 \end{itemize}

 \vspace{0.8cm}

 \only<16>{
 Se cierra el flujo si está $\underbrace{\text{no \textit{d-conectado}}}_{\text{\small d-separado}}$
  }

\end{textblock}
}

\only<1-2>{
\begin{textblock}{80}(65,72) \Large
$\phantom{\overset{?}{=}} P(l) \only<1>{\overset{?}{=}}\only<2>{\neq} P(l|e)\phantom{\overset{?}{=}}$
\end{textblock}
}

\only<3-4>{
\begin{textblock}{80}(65,72) \Large
$\phantom{\overset{?}{=}} P(l|a) \only<3>{\overset{?}{=}}\only<4>{=} P(l|a,e)\phantom{\overset{?}{=}}$
\end{textblock}
}


\only<5-6>{
\begin{textblock}{80}(65,72) \Large
$\phantom{\overset{?}{=}} P(r) \only<5>{\overset{?}{=}}\only<6>{\neq} P(r|a)\phantom{\overset{?}{=}}$
\end{textblock}
}


\only<7-8>{
\begin{textblock}{80}(65,72) \Large
$\phantom{\overset{?}{=}} P(r|t) \only<7>{\overset{?}{=}}\only<8>{=} P(r|t,a)\phantom{\overset{?}{=}}$
\end{textblock}
}


\only<9-10>{
\begin{textblock}{80}(65,72) \Large
$\phantom{\overset{?}{=}} P(t) \only<9>{\overset{?}{=}}\only<10>{=} P(t|e)\phantom{\overset{?}{=}}$
\end{textblock}
}


\only<11-12>{
\begin{textblock}{80}(65,72) \Large
$\phantom{\overset{?}{=}} P(t|a) \only<11>{\overset{?}{=}}\only<12>{\neq} P(t|a,e)\phantom{\overset{?}{=}}$
\end{textblock}
}


\only<13-14>{
\begin{textblock}{80}(65,72) \Large
$\phantom{\overset{?}{=}} P(t|l) \only<13>{\overset{?}{=}}\only<14>{\neq} P(t|l,e)\phantom{\overset{?}{=}}$
\end{textblock}
}


 \end{frame}


 \begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Flujo de inferencia causal \\
 \end{textblock}
 \vspace{0.75cm}


\begin{textblock}{160}(0,14) \centering
 \tikz{
    \node[det] (l) {$l$} ; %
    \node[det, above=of l] (a) {$a$} ; %
    \node[det, above=of a,xshift=1.5cm] (t) {$t$} ; %
    \only<3->{\node[det, fill=black!15, above=of a,xshift=-1.5cm] (e) {$e$};}
    \only<2>{\node[det, double, double distance=0.5mm, fill=black!15, above=of a, xshift=-1.5cm] (e) {$e$} ;}
    \only<1>{\node[det, above=of a,xshift=-1.5cm] (e) {$e$};}

    \node[det, below=of t,xshift=1.5cm] (r) {$r$} ; %
    \only<1-2>{\node[det, above=of t,xshift=-1.5cm] (c) {$c$} ;}
    \only<3->{\node[det, fill=black!15,above=of t,xshift=-1.5cm] (c) {$c$} ;}


    \edge {a} {l};
    \edge {t,e} {a};
    \edge {t} {r};
    \only<2>{\edge {c} {t};}
    \only<1,3>{\edge {c} {e,t};}

    \only<1,3>{\node[const, left= of e, xshift=-0.1cm] (cpd_e) {Entradera:};}
    \only<2>{\node[const, left= of e, xshift=-0.1cm] (cpd_e) {\textit{do}(Entradera)};}
    \node[const, right= of t, xshift=0.1cm] (cpd_t) {:Terremoto};
    \node[const, right= of c, xshift=0.1cm] (cpd_c) {:Ciudad};
    \node[const, left= of a, xshift=-0.1cm] (cpd_a) {Alarma:};
    \node[const, right= of r, xshift=0.1cm] (cpd_r) {:Redes};
    \node[const, left= of l, xshift=-0.1cm] (cpd_l) {Llamada:};

    \node[invisible, left=of e, xshift=-3cm] () {};
    }
\end{textblock}

\only<2>{
\begin{textblock}{150}(5,80) \centering
\Large Intervenimos en el modelo causal
\end{textblock}
}

\only<3>{
\begin{textblock}{150}(5,80) \centering
\Large Cerramos el flujo de inferencia trasero
\end{textblock}
}

\end{frame}

%
%  \begin{frame}[plain]
% \begin{textblock}{160}(0,4)
%  \centering \LARGE  Flujo de inferencia causal
%  \end{textblock}
%
% \begin{textblock}{160}(0,12)
%  \centering
%
%  \tikz{
%     \node[det] (l) {$l$} ; %
%     \node[det, above=of l] (a) {$a$} ; %
%     \node[det, above=of a,xshift=1.5cm] (t) {$t$} ; %
%     \only<1-2>{\node[det, above=of a,xshift=-1.5cm] (e) {$e$} ; }
%     \only<3->{\node[det, above=of a,fill=black!15,xshift=-1.5cm] (e) {$e$} ; }
%     \node[det, below=of t,xshift=1.5cm] (r) {$r$} ; %
%     \only<1-3>{\node[det, above=of e,xshift=1.5cm] (c) {$c$} ; }
%     \only<4->{\node[det, above=of e, fill=black!15, xshift=1.5cm] (c) {$c$} ; }
%
%     \edge {c} {e,t};
%     \edge {a} {l};
%     \edge {t,e} {a};
%     \edge {t} {r};
%
%
%     \only<1-2>{
%     \node[const, left= of c, xshift=-0.1cm] (cpd_c) {
%     \begin{tabular}{|c|c|}
%         \hline
%         $c^0$ & $c^1$ \\ \hline
%         $0.200$ & $0.800$  \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_c] (n_c) {$P(\text{Ciudad})$};
%     }
%     \only<3>{
%     \node[const, left= of c, xshift=-0.1cm] (cpd_c) {
%     \begin{tabular}{|c|c|}
%         \hline
%         $c^0$ & $c^1$ \\ \hline
%         $0.208$ & $0.792$  \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_c] (n_c) {$P(\text{Ciudad}|\text{Entradera}=0)$};
%     }
%     \only<4>{
%     \node[const, left= of c, xshift=-0.1cm] (cpd_c) {
%     \begin{tabular}{|c|c|}
%         \hline
%         $c^0$ & $c^1$ \\ \hline
%         $1.000$ & $0.000$  \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_c] (n_c) {$\phantom{P|}\text{Ciudad}=0\phantom{P}$};
%     }
%
%     \only<1>{
%     \node[const,  left= of e, yshift=-0.3cm, xshift=-0.1cm] (cpd_e) {
%     \begin{tabular}{|c|c|c|}
%         \hline
%        & $e^0$ & $e^1$ \\ \hline
%       $c^0$ & $0.999$ & $0.001$  \\ \hline
%       $c^1$ & $0.95$ & $0.05$  \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_e] (n_e) {$P(\text{Entradera}|\text{Ciudad})$};
%     }
%     \only<2>{
%     \node[const,  left= of e, yshift=-0.3cm, xshift=-0.1cm] (cpd_e) {
%     \begin{tabular}{|c|c|}
%         \hline
%         $e^0$ & $e^1$ \\ \hline
%        $0.960$ & $0.040$  \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_e] (n_e) {$P(\text{Entradera})$};
%     }
%     \only<3-4>{
%     \node[const,  left= of e, yshift=-0.3cm, xshift=-0.1cm] (cpd_e) {
%     \begin{tabular}{|c|c|}
%         \hline
%         $e^0$ & $e^1$ \\ \hline
%        $1.000$ & $0.000$  \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_e] (n_e) {$\text{Entradera}=0$};
%     }
%
%     \only<1>{
%     \node[const, right= of t, yshift=0.9cm, xshift=0.1cm] (cpd_t) {
%     \begin{tabular}{|c|c|c|}
%         \hline
%        & $t^0$ & $t^1$ \\ \hline
%       $c^0$ & $0.99$ & $0.01$  \\ \hline
%      $c^1$  & $0.95$ & $0.05$  \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_t] (n_t) {$P(\text{Terremoto}|\text{Ciudad})$};
%     }
%     \only<2>{
%     \node[const, right= of t, yshift=0.6cm, xshift=0.1cm] (cpd_t) {
%     \begin{tabular}{|c|c|}
%         \hline
%         $t^0$ & $t^1$ \\ \hline
%        $0.958$ & $0.042$  \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_t] (n_t) {$P(\text{Terremoto})$};
%     }
%     \only<3>{
%     \node[const, right= of t, yshift=0.6cm, xshift=0.1cm] (cpd_t) {
%     \begin{tabular}{|c|c|}
%         \hline
%         $t^0$ & $t^1$ \\ \hline
%        $0.959$ & $0.041$  \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_t] (n_t) {$P(\text{Terremoto}|\text{Entradera}=0)$};
%     }
%     \only<4>{
%     \node[const, right= of t, yshift=0.6cm, xshift=0.1cm] (cpd_t) {
%     \begin{tabular}{|c|c|}
%         \hline
%         $t^0$ & $t^1$ \\ \hline
%        $0.990$ & $0.010$  \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_t] (n_t) {$P(\text{Terremoto}|\text{Ciudad}=0)$};
%     }
%
%
%     \only<1>{
%     \node[const, left= of a, yshift=-1.6cm, xshift=-0.5cm] (cpd_a) {
%     \begin{tabular}{|c|c|c|}
%         \hline
%         & $a^0$ & $a^1$ \\ \hline
%        ($e^0, t^0$) & $0.99$ & $0.01$  \\ \hline
%        ($e^1, t^0$) & $0.01$ & $0.99$  \\ \hline
%        ($e^0, t^1$) & $0.01$ & $0.99$  \\ \hline
%        ($e^1, t^1$) & $0.0001$ & $0.9999$  \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_a] (n_a) {$P(\text{Alarma}|\text{Entradera},\text{Terremoto})$};
%     }
%     \only<2>{
%     \node[const, left= of a, yshift=-0.6cm, xshift=-0.5cm] (cpd_a) {
%     \begin{tabular}{|c|c|}
%         \hline
%          $a^0$ & $a^1$ \\ \hline
%         $0.911$ & $0.089$  \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_a] (n_a) {$P(\text{Alarma})$};
%     }
%     \only<3>{
%     \node[const, left= of a, yshift=-0.6cm, xshift=-0.5cm] (cpd_a) {
%     \begin{tabular}{|c|c|}
%         \hline
%          $a^0$ & $a^1$ \\ \hline
%         $0.949$ & $0.051$  \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_a] (n_a) {$P(\text{Alarma}|\text{Entradera}=0)$\hspace{1.5cm}\phantom{.}};
%     }
%     \only<4>{
%     \node[const, left= of a, yshift=-0.6cm, xshift=-0.5cm] (cpd_a) {
%     \begin{tabular}{|c|c|}
%         \hline
%          $a^0$ & $a^1$ \\ \hline
%         $0.980$ & $0.020$  \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_a] (n_a) {$P(\text{Alarma}|\text{Entradera}=0, \text{Ciudad}=0)$\hspace{3cm}\phantom{.}};
%     }
%
%     \only<1>{
%     \node[const, right= of r, yshift=0.2cm, xshift=0.1cm] (cpd_r) {
%     \begin{tabular}{|c|c|c|}
%         \hline
%         & \, $r^0$ \, & \, $r^1$ \,  \\ \hline
%        $(t^0)$ & $0.99$ & $0.01$   \\ \hline
%        $(t^1)$ & $0.01$ & $0.99$   \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_r] (n_r) {$P(\text{Redes}|\text{Terremoto})$};
%     }
%     \only<2>{
%     \node[const, right= of r, yshift=0.2cm, xshift=0.1cm] (cpd_r) {
%     \begin{tabular}{|c|c|}
%         \hline
%         \, $r^0$ \, & \, $r^1$ \,  \\ \hline
%        $0.948$ & $0.052$   \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_r] (n_r) {$P(\text{Redes})$};
%     }
%     \only<3>{
%     \node[const, right= of r, yshift=0.2cm, xshift=0.1cm] (cpd_r) {
%     \begin{tabular}{|c|c|}
%         \hline
%         \, $r^0$ \, & \, $r^1$ \,  \\ \hline
%        $0.949$ & $0.051$   \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_r] (n_r) {$P(\text{Redes}|\text{Entradera}=0)$};
%     }
%     \only<4>{
%     \node[const, right= of r, yshift=0.2cm, xshift=0.1cm] (cpd_r) {
%     \begin{tabular}{|c|c|}
%         \hline
%         \, $r^0$ \, & \, $r^1$ \,  \\ \hline
%        $0.980$ & $0.020$   \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_r] (n_r) {$P(\text{Redes}|\text{Ciudad}=0)$};
%     }
%
%     \only<1>{
%     \node[const, right= of l, yshift=-0.4cm,xshift=0.1cm] (cpd_l) {
%     \begin{tabular}{|c|c|c|}
%         \hline
%         & \, $l^0$ \, & \, $l^1$ \,  \\ \hline
%        $(a^0)$ & $0.99$ & $0.01$   \\ \hline
%        $(a^1)$ & $0.01$ & $0.99$   \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_l] (n_l) {$P(\text{Llamada}|\text{Alarma})$};
%     }
%     \only<2>{
%     \node[const, right= of l, yshift=-0.4cm,xshift=0.1cm] (cpd_l) {
%     \begin{tabular}{|c|c|}
%         \hline
%          \, $l^0$ \, & \, $l^1$ \,  \\ \hline
%         $0.903$ & $0.097$   \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_l] (n_l) {$P(\text{Llamada})$};
%     }
%     \only<3>{
%     \node[const, right= of l, yshift=-0.4cm,xshift=0.1cm] (cpd_l) {
%     \begin{tabular}{|c|c|}
%         \hline
%          \, $l^0$ \, & \, $l^1$ \,  \\ \hline
%         $0.940$ & $0.060$   \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_l] (n_l) {$\phantom{.}\hspace{1.5cm}P(\text{Llamada}|\text{Entradera}=0)$};
%     }
%     \only<4>{
%     \node[const, right= of l, yshift=-0.4cm,xshift=0.1cm] (cpd_l) {
%     \begin{tabular}{|c|c|}
%         \hline
%          \, $l^0$ \, & \, $l^1$ \,  \\ \hline
%         $0.970$ & $0.030$   \\ \hline
%     \end{tabular}
%     };
%     \node[const, above= of cpd_l] (n_l) {$\phantom{.}\hspace{3.6cm}P(\text{Llamada}|\text{Entradera}=0, \text{Ciudad}=0)$};
%     }
%
%     \node[invisible, left=of e, xshift=-5.5cm] (il) {};
%     \node[invisible, right=of r, xshift=4.8cm] (ir) {};
%  }
% \end{textblock}
%
% \end{frame}







\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Identificación del efecto causal\\
 \large Con observables, sin intervenciones
\end{textblock}


\begin{textblock}{160}(10,20)
 \Large Backdoor criterion\\[0.1cm] \large

  Conjunto de variable $W$ tal que:

  \hspace{0.3cm} 1. $W$ cierra todos los caminos traseros de $T$ a $Y$

  \hspace{0.3cm} 2. $W$ no contiene ningún descendiente de $T$
\end{textblock}


\only<2->{
\begin{textblock}{160}(20,42)
 \begin{flalign*}
  P(y|\text{do}(t)) & \only<-5>{= \sum_w P(y|\text{do}(t),w) P(w|\text{do}(t))} \only<5->{= \sum_w P(y|t,w) P(w)}
  &&
 \end{flalign*}
\end{textblock}
}


\only<3-5>{
\begin{textblock}{160}(15,67)
1. Porque $W$ corta el flujo trasero vale: $P(y|\text{do}(t),w) = P(y|t,w)$
\end{textblock}
}

\only<4-5>{
\begin{textblock}{160}(15,75)
2. Porque $W$ no contiene descendientes de $T$ vale: $P(w|\text{do}(t)) = P(w)$
\end{textblock}
}

\only<7->{
\begin{textblock}{160}(15,58)
\begin{flalign*}
& \E[Y|\text{do}(t)]  = \sum_w \E[Y|t,w]P(w) \only<8->{= \E_w \E[Y|t,W] } &&
\end{flalign*}
\end{textblock}
}


\only<9->{
\begin{textblock}{160}(0,76)
\begin{equation*}
 \E[Y|\text{do}(t1)] - \E[Y|\text{do}(t0)] = \E_w \E[Y|t1,W] - \E_w \E[Y|t0,W]
\end{equation*}
\end{textblock}
}




\end{frame}



\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Controles \only<1-6>{buenos}\only<7-12,16>{malos}\only<13-15>{neutrales} \\
 \large \only<12>{Sesgo de selección}\only<13-14>{Mejoran precisión}\only<15>{Reducen precisión}
 \end{textblock}
 \vspace{0.75cm}


\only<1>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \node[latent, fill=red!30] (z) {$z$} ; %
    \node[latent, fill=black!15 , below=of z, xshift=-1.5cm] (x) {$x$} ; %
    \node[latent, fill=black!15, below=of z, xshift=1.5cm] (y) {$y$} ; %

    \phantom{\node[latent, right=of y] (il) {$l$} ; }
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }

    \edge {z} {x,y};
    \edge {x} {y};
}
\end{textblock}
}


\only<2>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \node[latent] (u) {$u$} ; %

    \node[latent, fill=red!30,  below=of u, xshift=-1cm,yshift=0.6cm] (z) {$z$} ; %
    \node[latent, fill=black!15 , below=of z, xshift=-1cm,yshift=0.6cm] (x) {$x$} ; %
    \node[latent, fill=black!15, right=of x, xshift=2cm] (y) {$y$} ; %

    \phantom{\node[latent, right=of y] (il) {$l$} ; }
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }


    \edge {u} {z};
    \edge {z} {x};
    \edge {u,x} {y};
}
\end{textblock}
}

\only<3>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \node[latent] (u) {$u$} ; %

    \node[latent, fill=red!30,  below=of u, xshift=1cm,yshift=0.6cm] (z) {$z$} ; %
    \node[latent, fill=black!15, below=of z, xshift=1cm, yshift=0.6cm] (y) {$y$} ; %
    \node[latent, fill=black!15 , left=of y, xshift=-2cm] (x) {$x$} ; %

    \phantom{\node[latent, right=of y] (il) {$l$} ; }
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }

    \edge {u} {z,x};
    \edge {z,x} {y};
}
\end{textblock}
}

\only<4>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \node[latent] (u) {$u$} ; %

    \node[latent, fill=red!30,  below=of u, xshift=1cm,yshift=0.6cm] (z) {$z$} ; %
    \node[latent, below=of z, xshift=1cm, yshift=0.6cm] (m) {$m$} ; %
    \node[latent, fill=black!15 , left=of m, xshift=-2cm] (x) {$x$} ; %
    \node[latent, fill=black!15, right=of m] (y) {$y$} ; %

    \phantom{\node[latent, left=of x] (ir) {$r$} ; }

    \edge {u} {z,x};
    \edge {z,x} {m};
    \edge {m} {y};
}
\end{textblock}
}

\only<5>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \node[latent] (u) {$u$} ; %

    \node[latent, fill=red!30,  below=of u, xshift=-1cm,yshift=0.6cm] (z) {$z$} ; %
    \node[latent, fill=black!15 , below=of z, xshift=-1cm,yshift=0.6cm] (x) {$x$} ; %
    \node[latent, right=of x, xshift=2cm] (m) {$m$} ; %

    \node[latent, fill=black!15, right=of m] (y) {$y$} ;
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }


    \edge {u} {m,z};
    \edge {z} {x};
    \edge {x} {m};
    \edge {m} {y};
}
\end{textblock}
}


\only<6>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \node[latent, fill=red!30] (z) {$z$} ; %
    \node[latent, fill=black!15 , below=of z, xshift=-1.5cm] (x) {$x$} ; %
    \node[latent, below=of z, xshift=1.5cm] (m) {$m$} ; %

    \node[latent, fill=black!15, right=of m] (y) {$y$} ;
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }

    \edge {x,z} {m};
    \edge {z} {x};
    \edge {m} {y};

}
\end{textblock}
}


\only<7>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \node[latent, fill=red!30] (z) {$z$} ; %
    \node[latent, fill=black!15 , below=of z, xshift=-1.5cm] (x) {$x$} ; %
    \node[latent, below=of z, xshift=1.5cm] (m) {$m$} ; %

    \node[latent, above=of x] (ux) {$u_1$} ; %
    \node[latent, above=of m] (um) {$u_2$} ; %


    \node[latent, fill=black!15, right=of m] (y) {$y$} ;
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }

    \edge {um,ux} {z};
    \edge {um,x} {m};
    \edge {ux} {x};
    \edge {m} {y};
}
\end{textblock}
}

\only<8>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \phantom{\node[latent] (ia) {$a$} ; }
    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %

    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %
    \node[latent, fill=red!30, below=of ia] (z) {$z$} ;

    \node[latent, fill=black!15, below=of ia, xshift=1.5cm] (y) {$y$} ;

    \phantom{\node[latent, right=of y] (il) {$l$} ; }
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }

    \edge {x} {z};
    \edge {z} {y};
}
\end{textblock}
}


\only<9>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \phantom{\node[latent] (ia) {$a$} ; }
    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %

    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %
    \node[latent, below=of ia] (m) {$m$} ;

    \node[latent, fill=red!30, below=of m] (z) {$z$} ;
    \node[latent, fill=black!15, below=of ia, xshift=1.5cm] (y) {$y$} ;

    \phantom{\node[latent, right=of y] (il) {$l$} ; }
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }

    \edge {x} {m};
    \edge {m} {z,y};

}
\end{textblock}
}

\only<10>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \phantom{\node[latent] (ia) {$a$} ; }
    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %

    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %
    \phantom{\node[latent, below=of ia] (m) {$m$} ;}

    \node[latent, fill=red!30, below=of m] (z) {$z$} ;
    \node[latent, fill=black!15, below=of ia, xshift=1.5cm] (y) {$y$} ;

    \phantom{\node[latent, right=of y] (il) {$l$} ; }
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }

    \edge {x} {y,z};
    \edge {y} {z};

}
\end{textblock}
}

\only<11>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \node[latent] (ia) {$u$} ;
    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %

    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %
    \phantom{\node[latent, below=of ia] (m) {$m$} ;}



    \node[latent, fill=red!30, below=of m] (z) {$z$} ;
    \node[latent, fill=black!15, below=of ia, xshift=1.5cm] (y) {$y$} ;

    \phantom{\node[latent, right=of y] (il) {$l$} ; }
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }

    \edge {x} {y,z};
    \edge {ia} {z,y};

}
\end{textblock}
}

\only<12>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \phantom{\node[latent] (ia) {$u$} ;}
    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %

    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %
    \phantom{\node[latent, below=of ia] (m) {$m$} ;}



    \node[latent, fill=red!30, below=of m] (z) {$z$} ;
    \node[latent, fill=black!15, below=of ia, xshift=1.5cm] (y) {$y$} ;

    \phantom{\node[latent, right=of y] (il) {$l$} ; }
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }

    \edge {x} {y};
    \edge {y} {z};
}
\end{textblock}
}

\only<13>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \phantom{\node[latent] (ia) {$u$} ;}
    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %

    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %
    \phantom{\node[latent, below=of ia] (m) {$m$} ;}



    \node[latent, fill=red!30, right=of ia,xshift=1.5cm] (z) {$z$} ;
    \node[latent, fill=black!15, below=of ia, xshift=1.5cm] (y) {$y$} ;

    \phantom{\node[latent, right=of y] (il) {$l$} ; }
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }

    \edge {x} {y};
    \edge {z} {y};
}
\end{textblock}
}


\only<14>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \node[latent, fill=red!30] (ia) {$z$} ;
    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %

    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %
    \node[latent, below=of ia] (m) {$m$} ;

    \node[latent, fill=black!15, below=of ia, xshift=1.5cm] (y) {$y$} ;

    \phantom{\node[latent, right=of y] (il) {$l$} ; }
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }

    \edge {x} {m};
    \edge {m} {y};
    \edge {ia} {m};
}
\end{textblock}
}


\only<15>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \phantom{\node[latent] (ia) {$u$} ;}
    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %

    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %
    \phantom{\node[latent, below=of ia] (m) {$m$} ;}



    \node[latent, fill=red!30, left=of ia,xshift=-1.5cm] (z) {$z$} ;
    \node[latent, fill=black!15, below=of ia, xshift=1.5cm] (y) {$y$} ;

    \phantom{\node[latent, right=of y] (il) {$l$} ; }
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }

    \edge {x} {y};
    \edge {z} {x};
}
\end{textblock}
}


\only<16>{
\begin{textblock}{140}(10,30) \centering
\tikz{
    \node[latent] (ia) {$u$} ;
    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %

    \node[latent, fill=black!15 , below=of ia, xshift=-1.5cm] (x) {$x$} ; %
    \phantom{\node[latent, below=of ia] (m) {$m$} ;}



    \node[latent, fill=red!30, left=of ia,xshift=-1.5cm] (z) {$z$} ;
    \node[latent, fill=black!15, below=of ia, xshift=1.5cm] (y) {$y$} ;

    \phantom{\node[latent, right=of y] (il) {$l$} ; }
    \phantom{\node[latent, left=of x] (ir) {$r$} ; }

    \edge {ia} {x,y};
    \edge {x} {y};
    \edge {z} {x};
}
\end{textblock}
}




\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Estimación de efecto causal\\
 \large \only<3->{Modelos lineales}
 \end{textblock}
 \vspace{0.75cm}

 \only<1-3>{
\begin{textblock}{160}(0,24) \centering
\tikz{
  \node[latent] (z1) {$z_1$} ;
  \node[latent, below=of z1] (w1) {$w_1$} ;
  \only<1>{\node[latent, right=of w1] (z3) {$z_3$} ;}
  \only<2->{\node[latent, fill=red!30, right=of w1] (z3) {$z_3$} ;}
  \only<1>{\node[latent, right=of z3] (w2) {$w_2$} ;}
  \only<2->{\node[latent, fill=red!30, right=of z3] (w2) {$w_2$} ;}
  \node[latent, above=of w2] (z2) {$z_2$} ;
  \node[latent, fill=black!15, below=of w1] (x) {$x$} ;
  \node[latent, below=of z3] (w3) {$w_3$} ;
  \node[latent, fill=black!15, below=of w2] (y) {$y$} ;

  \onslide<3>{
    \node[const, below=of z1, xshift=-0.2cm, yshift=-0.15cm] (z1_w1) {$6$};
    \node[const, below=of z2, xshift=0.2cm, yshift=-0.15cm] (z2_w2) {$5$};
    \node[const, above=of z3, xshift=-0.6cm, yshift=0.4cm] (z3_z1) {$-4$};
    \node[const, above=of z3, xshift=0.63cm, yshift=0.43cm] (z2_z1) {$3$};
    \node[const, below=of z3, xshift=-1cm, yshift=-0.1cm] (z2_x) {$2$};
    \node[const, below=of z3, xshift=1.05cm, yshift=-0.1cm] (z2_y) {$-1$};
    \node[const, below=of w1, xshift=-0.35cm, yshift=-0.15cm] (w1_x) {$-1$};
    \node[const, below=of w2, xshift=0.2cm, yshift=-0.15cm] (w2_y) {$1$};
    \node[const, below=of x, xshift=0.8cm, yshift=0.3cm] (x_w3) {$2$};
    \node[const, below=of w3, xshift=0.8cm, yshift=0.3cm] (w3_y) {$-1$};
  }

  \edge {w3,z3,w2} {y}
  \edge {x} {w3}
  \edge {z1} {w1}
  \edge {z2} {w2}
  \edge {z1,z2} {z3}
  \edge {w1,z3} {x}

}
\end{textblock}
}

\end{frame}


\begin{frame}[plain, fragile]
\begin{textblock}{160}(0,4)
 \centering \LARGE Estimación de efecto causal\\
 \large Modelos lineales
 \end{textblock}
 \vspace{0.75cm}


\begin{textblock}{140}(10,17) \normalsize
\begin{lstlisting}
# https://github.com/glandfried/bayesian-linear-model
from linear_model import BayesianLinearModel
import numpy as np

N = 1000
z1 = np.random.uniform(-3,3, size=N)
w1 = 3*z1 + np.random.normal(size=N,scale=1)
z2 = np.random.uniform(-3,3, size=N)
w2 = 2*z2 + np.random.normal(size=N,scale=1)
z3 = -2*z1 + 2*z2 + np.random.normal(size=N,scale=1)
x = -1*w1 + 2*z3 + np.random.normal(size=N,scale=1)
w3 = 2*x + np.random.normal(size=N,scale=1)
y = 2 - 1*w3 - z3 + w2 + np.random.normal(size=N,scale=1)
\end{lstlisting}
\end{textblock}
\end{frame}


\begin{frame}[plain, fragile]
\begin{textblock}{160}(0,4)
 \centering \LARGE Estimación de efecto causal\\
 \large Modelos lineales
 \end{textblock}
 \vspace{0.75cm}



\begin{textblock}{120}(20,18) \centering
$y \sim c_0 + c_1\,x + c_2\,z_3 + c_3\,w_2$

\includegraphics[width=0.7\textwidth]{figuras/pdf/controles-modeloComplejos.pdf}
\end{textblock}


\end{frame}


\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Identificación de modelo causal \\
\end{textblock}


\begin{textblock}{140}(10,12) \centering \Large
\begin{equation*}
P(\text{Modelo causal}\,|\, \text{Datos},\, \text{Intervenciones}) = \,  ?
\end{equation*}
\end{textblock}

\begin{textblock}{80}(5,34) \centering
 \tikz{
    \node[det] (a) {$A_{_{i}}$} ; %
    \node[det, below=of a] (b) {$B_{_{i}}$} ; %
    \node[const, left= of a, xshift=-0.3cm, yshift=0.1cm] (pa) { \small
    \begin{tabular}{|c|c|}
          $A=0$  &  $A=1$   \\ \hline
        $0.5$ & $0.5$   \\ \hline
    \end{tabular}
    }; %
    \node[const, above= of pa] (npa) {\small$P(A)$};


    \node[const, left=of b, xshift=-0.3cm, yshift=-0.1cm] (pb) { \small
    \begin{tabular}{c|c|c|}
        &  $B=0$  &  $B=1$   \\ \hline
       $A=0$ & $0.95$ & $0.05$   \\ \hline
       $A=1$ & $0.05$ & $0.95$   \\ \hline
    \end{tabular}
    };
    \node[const, above= of pb] (npb) {\small$P(B|A)$};

    \node[invisible, above=of a, yshift=1cm] (ia) {};

    \plate {datos} {(a)(b)} {\tiny$i$: Dato};

    \edge {a} {b};
    }
\end{textblock}
\begin{textblock}{80}(75,34) \centering
    \tikz{
    \node[det] (a) {$A_{_{i}}$} ; %
    \node[det, below=of a] (b) {$B_{_{i}}$} ; %
    \node[const, right= of a, xshift=0.3cm, yshift=0.1cm] (pa) { \small
    \begin{tabular}{c|c|c|}
        &  $A=0$  &  $A=1$   \\ \hline
       $B=0$ & $0.95$ & $0.05$   \\ \hline
       $B=1$ & $0.05$ & $0.95$   \\ \hline
    \end{tabular}
    }; %
    \node[const, above= of pa] (npa) {\small$P(A|B)$};


    \node[const, right=of b, xshift=0.3cm, yshift=-0.1cm] (pb) { \small
    \begin{tabular}{|c|c|}
          $B=0$  &  $B=1$   \\ \hline
        $0.5$ & $0.5$   \\ \hline
    \end{tabular}
    };
    \node[const, above= of pb] (npb) {\small$P(B)$};

    \node[invisible, above=of a, yshift=1cm] (ia) {};

    \plate {datos} {(a)(b)} {\tiny$i$: Dato};

    \edge {b} {a};
    }
\end{textblock}

\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Teorías causales deterministas \\
 \large Structural (or functional) causal models
\end{textblock}


\begin{textblock}{140}(10,22)
\Large Modelo causal. \large

Conjunto de funciones $F$ y variables internas $X$ y de contorno $U$
\end{textblock}

\only<2->{
\begin{textblock}{80}(0,42) \centering \large
\onslide<4->{Sub}Modelo$_{A\rightarrow B}$ \hspace{0.5cm} \phantom{.}
\end{textblock}

\begin{textblock}{30}(10,50)
\begin{align*}
A & =\only<2-3>{f_A(U_A)}\only<4->{\text{do}(t)} \\
B &= f_B(A,U_B)  \\
\end{align*}
\end{textblock}
}



\only<2->{
\begin{textblock}{30}(40,50) \centering

\tikz{
  \node[latent, minimum size= 0.2cm] (u1) {};
  \node[latent, fill = black, below =of u1, minimum size= 0.2cm, xshift=-0.7cm, yshift=0.3cm] (x1) {};
  \node[latent, fill = black, below =of x1, minimum size= 0.2cm, xshift=0.7cm, yshift=0.3cm] (x2) {};
  \node[latent,above=of x2, minimum size= 0.2cm, xshift=0.7cm, yshift=-0.3cm] (u2) {};
  \only<-3>{\edge {u1} {x1};}
  \edge {u2,x1} {x2};

}
\end{textblock}
}


\only<3->{
\begin{textblock}{80}(80,42) \centering \large
\onslide<4->{Sub}Modelo$_{B\rightarrow A}$ \hspace{0.5cm} \phantom{.}
\end{textblock}

\begin{textblock}{30}(90,50)
\begin{align*}
B &= f_B(U_B)  \\
A & =\only<2-3>{f_A(B,U_A)}\only<4->{\text{do}(t)} \\
\phantom{B} &\phantom{= f_B(X_A,U_B)}  \\
\end{align*}
\end{textblock}
}



\only<3->{
\begin{textblock}{30}(120,52) \centering

\tikz{
  \node[latent, minimum size= 0.2cm] (u1) {};
  \node[latent, fill = black, below =of u1, minimum size= 0.2cm, xshift=-0.7cm, yshift=0.3cm] (x1) {};
  \node[latent, fill = black, below =of x1, minimum size= 0.2cm, xshift=0.7cm, yshift=0.3cm] (x2) {};
  \node[latent,above=of x2, minimum size= 0.2cm, xshift=0.7cm, yshift=-0.3cm] (u2) {};
  \only<-3>{\edge {u1,x2} {x1};}
  \edge {u2} {x2};

}
\end{textblock}
}


\only<5->{
\begin{textblock}{160}(0,78) \centering
\text{\small (Potential outcome) } $Y_t(u) = Y_{M_t}(u)$ \text{\small  \ (Structural Causal Model)}
\end{textblock}
}

\end{frame}

%
% \begin{frame}[plain]
%  \begin{textblock}{160}(0,4)
%  \centering \LARGE
%  Modelos causales deterministas \\
%  \Large no lineales
% \end{textblock}
% \vspace{0.75cm}
%
%
% \begin{align*}
%  \text{Población}(t+1) = r \cdot \text{Población}(t)\cdot (1-\text{Población}(t))
% \end{align*}
%
% \vspace{0.5cm}
%
% \pause
%
% \centering
%
% \tikz{
%     \node[latent] (n1) {$x_n$} ;
%
%     \node[latent, right=of n1, xshift=3cm] (n2) {$x_{n+1}$} ;
%
%      \path[->] (n1) edge node[yshift=0.5cm] {$rx_n(1-x_n)$} (n2);
%
% }
%
% %lorenz
%
% %juego de la vida
%
% \end{frame}
%
% \begin{frame}[plain]
%  \begin{textblock}{160}(0,4)
%  \centering \LARGE
%  Modelos causales deterministas \\  \Large no lineales
% \end{textblock}
% \vspace{0.75cm}
%
% \only<1>{
% \begin{textblock}{160}(0,22)
% \centering
%  \includegraphics[page={1},width=0.6\textwidth]{figuras/poblacion.pdf}
% \end{textblock}
% }
%
% \only<2>{
% \begin{textblock}{160}(0,22)
% \centering
%  \includegraphics[page={2},width=0.6\textwidth]{figuras/poblacion.pdf}
% \end{textblock}
% }
%
% \only<3>{
% \begin{textblock}{160}(0,22)
% \centering
%  \includegraphics[page={3},width=0.6\textwidth]{figuras/poblacion.pdf}
% \end{textblock}
% }
%
% \only<4>{
% \begin{textblock}{160}(0,22)
% \centering
%  \includegraphics[page={4},width=0.6\textwidth]{figuras/poblacion.pdf}
% \end{textblock}
% }
%
% \only<5>{
% \begin{textblock}{160}(0,22)
% \centering
%  \includegraphics[page={5},width=0.6\textwidth]{figuras/poblacion.pdf}
% \end{textblock}
% }
%
% \only<6>{
% \begin{textblock}{160}(0,22)
% \centering
%  \includegraphics[page={6},width=0.6\textwidth]{figuras/poblacion.pdf}
% \end{textblock}
% }
%
% \only<7>{
% \begin{textblock}{160}(0,22)
% \centering
%  \includegraphics[page={7},width=0.6\textwidth]{figuras/poblacion.pdf}
% \end{textblock}
% }
%
% \only<8>{
% \begin{textblock}{160}(0,22)
% \centering
%  \includegraphics[page={8},width=0.6\textwidth]{figuras/poblacion.pdf}
% \end{textblock}
% }
%
%
% \only<9>{
% \begin{textblock}{160}(0,22)
% \centering
%  \includegraphics[page={9},width=0.6\textwidth]{figuras/poblacion.pdf}
% \end{textblock}
% }
%
%
% \only<10>{
% \begin{textblock}{160}(0,22)
% \centering
%  \includegraphics[page={10},width=0.6\textwidth]{figuras/poblacion.pdf}
% \end{textblock}
% }
%
% \only<11>{
% \begin{textblock}{160}(0,22)
% \centering
%  \includegraphics[page={11},width=0.6\textwidth]{figuras/poblacion.pdf}
% \end{textblock}
% }
%
% \only<12>{
% \begin{textblock}{160}(0,22)
% \centering
%  \includegraphics[page={12},width=0.6\textwidth]{figuras/poblacion.pdf}
% \end{textblock}
% }
%
% \only<13>{
% \begin{textblock}{160}(0,22)
% \centering
%  \includegraphics[page={13},width=0.6\textwidth]{figuras/poblacion.pdf}
% \end{textblock}
% }
%
%
%
% \end{frame}


\begin{frame}[plain]
\only<1->{
\begin{textblock}{160}(0,4)
 \centering \LARGE Teorías causales probabilísticas \\
 \large \only<1-6>{Notación extendida para de los modelos gráficos (Factor graph)}\only<7->{Sistemas de modelos causales}
\end{textblock}
}


\only<1>{
\begin{textblock}{80}(5,34)
\raggedleft
 \tikz{
    \node[det] (a) {$A$} ; %
    \node[det, below=of a] (b) {$B$} ; %
    \node[const, left= of a, xshift=-0.3cm, yshift=0.1cm] (pa) { \small
    \begin{tabular}{|c|c|}
          $A=0$  &  $A=1$   \\ \hline
        $0.5$ & $0.5$   \\ \hline
    \end{tabular}
    }; %
    \node[const, above= of pa] (npa) {\small$P(A)$};


    \node[const, left=of b, xshift=-0.3cm, yshift=-0.1cm] (pb) { \small
    \begin{tabular}{c|c|c|}
        &  $B=0$  &  $B=1$   \\ \hline
       $A=0$ & $0.95$ & $0.05$   \\ \hline
       $A=1$ & $0.05$ & $0.95$   \\ \hline
    \end{tabular}
    };
    \node[const, above= of pb] (npb) {\small$P(B|A)$};

    \node[invisible, right=of a, xshift=1.5cm] (ia) {};

    \edge {a} {b};
    }
\end{textblock}
}

\only<2-4>{
\begin{textblock}{80}(5,18)
\raggedleft
 \tikz{

    \node[factor] (fa) {} ; %
    \node[det, below=of fa, yshift=0.3cm] (a) {$A$} ; %
    \node[factor, below=of a, yshift=0.3cm] (fb) {} ; %
    \node[det, below=of fb, yshift=0.3cm] (b) {$B$} ; %


    \node[const, right= of fa, xshift=0cm] (npa) {\small\only<2-3>{$P(A)$}\only<4->{$P(A|\text{do}_A)$}};
    \node[const, left= of fa, xshift=0cm] (pa) { \small
      \only<2-3>{
      \begin{tabular}{|c|c|}
            $A=0$  &  $A=1$   \\ \hline
          $0.5$ & $0.5$   \\ \hline
      \end{tabular}
      }
      \only<4->{
      \begin{tabular}{c|c|c|}
            & $A=0$  &  $A=1$   \\ \hline
         {\scriptsize \text{do}$_A = 0$ } & $0.5$ & $0.5$   \\ \hline
         {\scriptsize \text{do}$_A = 1$ } & $1-\alpha$ & $\alpha$   \\ \hline
      \end{tabular}
      }
    }; %

    \onslide<4->{

      %\node[factor, right=of fa, xshift=-0.7cm] (f2a) {} ;
      %\gate {if} {(fa)(f2a)} {};
      \node[det, above=of fa, yshift=-0.3cm] (doA) {do$_A$} ;
      %\gate {if_Trata} {(f2a)} {};
      %\gate {if_noTrata} {(f2a)} {};

      \node[factor, above=of doA, yshift=-0.3cm] (fdoA) {} ;

      \node[const, right= of fdoA] (npdoA) {\small$P(\text{do}_A)$};
      \node[const, left= of fdoA, xshift=0cm] (pdoA) { \small
        \begin{tabular}{|c|c|}
            do$_A=0$  &  do$_A=1$   \\ \hline
            $1-\delta_{A}$ & $\delta_A$   \\ \hline
        \end{tabular}
    }; %

    }


    \node[const, right= of fb] (npb) {\small$P(B|A)$};
    \node[const, left=of fb, xshift=-0.3cm] (pb) { \small
    \begin{tabular}{c|c|c|}
        &  $B=0$  &  $B=1$   \\ \hline
       $A=0$ & $0.95$ & $0.05$   \\ \hline
       $A=1$ & $0.05$ & $0.95$   \\ \hline
    \end{tabular}
    };

    \node[invisible, right=of a, xshift=1.5cm] (ia) {};


    \edge {fa} {a};
    \onslide<4->{
      \edge {fdoA} {doA};
      \edge {doA} {fa};
    }
    \edge[-] {a} {fb};
    \edge {fb} {b};

    }
\end{textblock}
}

\only<1-2>{
\begin{textblock}{70}(80,42) \centering \Large
\begin{equation*}
 P(A, B | \text{Modelo}_{A \rightarrow B})
\end{equation*}
\end{textblock}
}
\only<3>{
\begin{textblock}{70}(80,42) \centering
\textbf{Nodos}: Variables y Funciones \\[0.6cm]

\textbf{Ejes}: Variable $v$ es parámetro

de la función $f$
\end{textblock}
}
\only<4>{
\begin{textblock}{70}(80,42) \centering \Large
\begin{equation*}
 P(A, B, \text{do}_A | \text{Modelo}_{A \rightarrow B })
\end{equation*}
\end{textblock}
}

\only<5>{
\begin{textblock}{70}(0,42) \centering \Large
\begin{equation*}
 P(A, B, \text{do}_A | \text{Modelo}_{B \rightarrow A })
\end{equation*}
\end{textblock}
}

\begin{textblock}{160}(15,74)
\begin{flalign*}
 \only<8>{& P(A, B, \text{do}_A | \text{Modelo}_{B \rightarrow A}) }
 \only<8>{= P(B) \, P_0(A|B)^{1-\text{do}_A} \, P_1(A)^{\text{do}_A} \, P(\text{do}_A)   \\}
 \only<9>{& P(A, B | \underbrace{\text{do}_A = 1, \text{Modelo}_{B \rightarrow A}}_{\text{Intervención}})= P(B) \, P_1(A)    \\}
 \only<10>{& P(A, B | \underbrace{\text{do}_A = 0, \text{Modelo}_{B \rightarrow A}}_{\text{Sin intervención}})= P(B) \, P_0(A|B)    \\}
 &&
\end{flalign*}
\end{textblock}





\only<5->{
\begin{textblock}{85}(25,18)
\raggedright
 \tikz{

    \node[det] (a) {$A$} ; %
    \only<-8,10->{\node[factor, below=of a] (fa) {} ; }
    \only<9>{\node[factor, below=of a, fill=black!7, draw=black!7] (fa) {} ; }
    \node[det, below=of fa] (b) {$B$} ; %
    \node[factor, below=of b] (fb) {} ; %

    \onslide<6->{
      \only<-8>{\node[det, left=of b] (doA) {do$_A$} ;}
      \only<9->{\node[det, left=of b, fill=black!20] (doA) {do$_A$} ;}
      \only<9>{\node[const, left=of doA] (odoA) {\small do$_A$=1} ;}
      \only<10>{\node[const, left=of doA] (odoA) {\small do$_A$=0} ;}
      \node[factor, below=of doA] (fdoA) {} ; %
      \node[const, left= of fdoA] (ndoA) {\small$P(\text{do}_A)$};
      \node[const, left=of ndoA] (pdoA) { \small
          \begin{tabular}{|c|c|}
                do$_A=0$  &  do$_A=1$   \\ \hline
              $1-\delta_A$ & $\delta_A$   \\ \hline
          \end{tabular}
        };
    }
    \onslide<7->{
      \only<-9>{\node[factor, left=of fa, xshift=0.725cm] (f2a) {} ;}
      \only<10->{\node[factor, left=of fa, draw=black!7, fill=black!7, xshift=0.725cm] (f2a) {} ;}
      \gate {ifA} {(fa)(f2a)} {};
      {\only<10>{\color{black!7}} \gate {ifA1} {(f2a)} {};}
      {\only<9>{\color{black!7}} \gate {ifA0} {(fa)} {};}
    }

    \only<-6>{\node[const, left=of fa] (npa) {\small \only<5>{$P(A|B)$} \only<6>{$P(A|B, \text{do}_A)$}};}
    \node[const, right= of fa, xshift=0.3cm] (pa) { \small
      \only<5>{
        \begin{tabular}{c|c|c|}
            &  $A=0$  &  $A=1$   \\ \hline
          $B=0$ & $0.95$ & $0.05$   \\ \hline
          $B=1$ & $0.05$ & $0.95$   \\ \hline
        \end{tabular}
      }
      \only<6>{
        \begin{tabular}{c|c|c|}
            &  $A=0$  &  $A=1$   \\ \hline
          {\scriptsize $B=0$ do$_A = 0$} & $0.95$ & $0.05$   \\ \hline
          {\scriptsize $B=1$ do$_A = 0$} & $0.05$ & $0.95$   \\ \hline
          {\scriptsize do$_A = 1$} & $1-\alpha$ & $\alpha$   \\ \hline
        \end{tabular}
      }
    }; %
    \only<7->{
      {\only<9>{\color{black!7}}\node[const, right=of ifA] (npa) {\small $P_0(A|B)$};}
      {\only<10>{\color{black!7}} \node[const, left=of ifA] (np2a) {\small $P_1(A)$}; }
      {\only<9>{\color{black!7}}\node[const, right= of npa] (pa) { \small
        \begin{tabular}{c|c|c|}
            &  $A=0$  &  $A=1$   \\ \hline
          $B=0$ & $0.95$ & $0.05$   \\ \hline
          $B=1$ & $0.05$ & $0.95$   \\ \hline
        \end{tabular}
      };}
      {\only<10>{\color{black!7}} \node[const, left= of np2a] (p2a) { \small
        \begin{tabular}{|c|c|}
              $A=0$  &  $A=1$   \\ \hline
           $1-\alpha$ & $\alpha$   \\ \hline
        \end{tabular}
      };}
    }


    \node[const, right= of fb] (npb) {\small$P(B)$};
    \node[const, right=of npb, xshift=0.3cm] (pb) { \small
    \begin{tabular}{|c|c|}
          $B=0$  &  $B=1$   \\ \hline
        $0.5$ & $0.5$   \\ \hline
    \end{tabular}
    };

%     \node[invisible, above=of a, yshift=0.2cm] (ia) {};
%     \node[invisible, left=of a, xshift=0.2cm] (ia) {};


    {\only<9>{\color{black!7}} \edge {fa} {a};}
    \edge {fb} {b};
    {\only<9>{\color{black!7}} \edge[-] {b} {fa}; }
    \onslide<6->{
      \edge {fdoA} {doA};
    }
    \onslide<6>{
      \edge[-] {doA} {fa};
    }
    \onslide<7->{
      \edge[-,dashed] {doA} {ifA0};
      {\only<10>{\color{black!7}} \edge {f2a} {a}; }
    }
    }
\end{textblock}
}

\end{frame}

\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Identificación de modelo causal\\
 \large A través de intervenciones do$(\cdot)$
 \end{textblock}
 \vspace{0.75cm}

\begin{textblock}{140}(3,24)
Datos:

\vspace{0.3cm}
\normalsize
\begin{tabular}{c|c|c|c|}
    $i$ & do$_{Ai}$ &  $A_i$  &  $B_i$   \\ \hline
    \onslide<1-7>{1 & $0$ & $1$ & $1$  \\ \hline
    {\tiny$\dots$} & $0$ & {\tiny$\dots$} & {\tiny$\dots$}   \\ \hline
    10 & $0$ & $0$ & $0$   \\ \hline \hline}11 & $1$ & $0$ & $1$   \\ \hline
    12 & $1$ & $1$ & $0$   \\ \hline
    {\tiny$\dots$} & $1$ & {\tiny$\dots$} & {\tiny$\dots$}  \\ \hline
\end{tabular}
\end{textblock}

\only<2->{
\begin{textblock}{110}(46,15) \normalsize
\begin{flalign*}
&
\only<2>{P(\text{Modelo}_{B\rightarrow A}|\text{Datos})}
\only<3->{\frac{P(\text{Modelo}_{B\rightarrow A}|\text{Datos})}{P(\text{Modelo}_{A\rightarrow B}|\text{Datos})}}
=
\only<2>{\frac{P(\text{Datos}|\text{M}_{B\rightarrow A}) \, P(\text{M}_{B\rightarrow A}) }{P(\text{Datos})}}
\only<3>{\frac{P(\text{Datos}|\text{M}_{B\rightarrow A}) \, P(\text{M}_{B\rightarrow A}) }{P(\text{Datos}|\text{M}_{A\rightarrow B}) \, P(\text{M}_{A\rightarrow B})}}
\only<4->{\frac{P(\text{Datos}|\text{M}_{B\rightarrow A})}{P(\text{Datos}|\text{M}_{A\rightarrow B}) }}
\\[0.5cm] &
\only<5>{ = \frac{\prod_i^n P(B_i, A_i, \text{do}_{A_i}|\text{M}_{BA}) }{\prod_i^n P(B_i, A_i, \text{do}_{A_i}|\text{M}_{AB}) }  }
\only<6>{ = \frac{\prod_i^n P(B_i|\text{M}_{_{BA}}) P_0(A_i|B_i,\text{M}_{_{BA}})^{1-\text{do}_A} P_1(A_i|\text{M}_{_{BA}})^{\text{do}_A}  P(\text{do}_A|\text{M}_{BA}) }{\prod_i^n P(A_i|\text{do}_A,\text{M}_{_{AB}}) P(B_i|A_i,\text{M}_{_{AB}}) P(\text{do}_A|\text{M}_{AB}) }}
\only<7-8>{ = \frac{\prod_i^n  P(B_i|\text{M}_{_{BA}}) P_0(A_i|B_i,\text{M}_{_{BA}})^{1-\text{do}_A} P_1(A_i|\text{M}_{_{BA}})^{\text{do}_A}  \phantom{P(\text{do}_A|\text{M}_{BA})} }{\prod_i^n  P(A_i|\text{do}_A,\text{M}_{_{AB}}) P(B_i|A_i,\text{M}_{_{AB}}) \phantom{P(\text{do}_A|\text{M}_{AB})} }}
\only<9>{ = \prod_{i=11}^n  \frac{P(B_i|\text{M}_{_{BA}}) P_1(A_i|\text{M}_{_{BA}}) }{P(B_i|A_i,\text{M}_{_{AB}}) P(A_i|\text{do}_A = 1,\text{M}_{_{AB}}) }  }
\only<10>{ = \prod_{i=11}^n  \frac{P(B_i|\text{M}_{_{BA}}) \alpha^{A_i} \, (1 - \alpha)^{1-A_i}}{P(B_i|A_i,\text{M}_{_{AB}}) \alpha^{A_i} \, (1 - \alpha)^{1-A_i}  }  }
\only<11->{ = \prod_{i=11}^n \frac{P(B_i|\text{M}_{_{BA}})}{P(B_i|A_i,\text{M}_{_{AB}})  }  }
&&
\end{flalign*}

\centering
\only<12>{
\includegraphics[width=0.7\textwidth]{figuras/identificacion.pdf}
}
\end{textblock}
}

\end{frame}


\begin{frame}[plain]
\begin{textblock}{160}(0,4)
 \centering \LARGE Identificación de modelo causal\\
 \large El conocimiento experto
 \end{textblock}
 \vspace{0.75cm}


 \begin{textblock}{160}(0,42) \Large \centering
 La principal fuente de información para la identificación

 modelos causales alternativos es el conocimiento experto.
 \end{textblock}




\end{frame}





%
% \begin{frame}[plain]
% \begin{textblock}{140}(10,28)
% \Large Ejercicio 1.1 \\[0.4cm]
%
% \large La persona que da la pista a veces se confunde y señala la caja donde está el regalo o la caja que fue elegida previamente por la persona. \\[0.2cm]
%
% \only<2>{
% \large Descubrir el verdadero efecto causal que el regalo y la elección tienen sobre la pista en base a los datos ofrecidos en la práctica. \\[0.1cm]}
%
% \end{textblock}
%
%
% \end{frame}

\begin{frame}[plain,noframenumbering]
\centering \vspace{0.5cm}
\includegraphics[width=0.6\textwidth]{auxiliar/img/LMB.png}
\end{frame}





%
% \begin{frame}[plain]
% \begin{textblock}{96}(0,6.5)\centering
% {\transparent{0.9}\includegraphics[width=0.8\textwidth]{auxiliar/static/inti.png}}
% \end{textblock}
%
% \begin{textblock}{160}(96,5.5)
% \includegraphics[width=0.35\textwidth]{auxiliar/static/pachacuteckoricancha}
% \end{textblock}
% \end{frame}





\end{document}



